<<<<<<< HEAD
{"version":3,"file":"index.js","mappings":"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","sources":["src://tavern_helper_template/external var \"Vue\"","webpack://tavern_helper_template/./src/çŠ¶æ€æ /app.vue?21ed","webpack://tavern_helper_template/src/çŠ¶æ€æ /app.vue?5709","src://tavern_helper_template/src/çŠ¶æ€æ /index.ts"],"sourcesContent":["const __WEBPACK_NAMESPACE_OBJECT__ = Vue;","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, normalizeClass as _normalizeClass, openBlock as _openBlock, createElementBlock as _createElementBlock, withModifiers as _withModifiers, vModelCheckbox as _vModelCheckbox, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, Transition as _Transition, withCtx as _withCtx, createVNode as _createVNode, normalizeStyle as _normalizeStyle } from \"vue\";\nconst _hoisted_1 = { class: \"glass sticky top-0 z-[100] flex w-full items-center justify-between px-4 py-2 text-[8px] font-medium shadow-xl sm:text-[8px]\" };\nconst _hoisted_2 = { class: \"flex items-center gap-4\" };\nconst _hoisted_3 = { class: \"flex items-center gap-1.5 opacity-80\" };\nconst _hoisted_4 = { class: \"text-slate-300\" };\nconst _hoisted_5 = { class: \"flex items-center gap-1 font-mono tracking-wider text-pink-400\" };\nconst _hoisted_6 = { class: \"flex items-center gap-3\" };\nconst _hoisted_7 = { class: \"relative flex items-center\" };\nconst _hoisted_8 = {\n    key: 0,\n    class: \"glass-card absolute top-full right-0 z-[200] mt-2 w-56 overflow-hidden rounded-xl border border-pink-500/30 shadow-2xl\"\n};\nconst _hoisted_9 = { class: \"space-y-5 p-4\" };\nconst _hoisted_10 = { class: \"flex items-center justify-between\" };\nconst _hoisted_11 = { class: \"switch\" };\nconst _hoisted_12 = { class: \"grid grid-cols-2 gap-2\" };\nconst _hoisted_13 = [\"onClick\"];\nconst _hoisted_14 = {\n    key: 0,\n    class: \"glass-card overflow-hidden rounded-2xl\"\n};\nconst _hoisted_15 = {\n    key: 0,\n    class: \"space-y-4 border-t border-white/10 px-4 pt-3 pb-4\"\n};\nconst _hoisted_16 = { class: \"mb-1.5 flex items-center justify-between\" };\nconst _hoisted_17 = { class: \"text-[13px] font-bold text-white/90\" };\nconst _hoisted_18 = { class: \"rounded-full bg-pink-500/10 px-2 py-0.5 text-[10px] font-medium text-pink-400\" };\nconst _hoisted_19 = { class: \"grid grid-cols-2 gap-4 rounded-xl border border-white/20 bg-black/30 p-3\" };\nconst _hoisted_20 = { class: \"flex flex-wrap gap-1.5\" };\nconst _hoisted_21 = { class: \"text-right\" };\nconst _hoisted_22 = { class: \"text-[11px] leading-tight font-medium text-pink-300\" };\nconst _hoisted_23 = { class: \"glass-card overflow-hidden rounded-2xl\" };\nconst _hoisted_24 = {\n    key: 0,\n    class: \"space-y-5 border-t border-white/10 px-4 pt-3 pb-4\"\n};\nconst _hoisted_25 = { key: 0 };\nconst _hoisted_26 = { class: \"mb-2 flex items-end justify-between\" };\nconst _hoisted_27 = { class: \"flex flex-col\" };\nconst _hoisted_28 = { class: \"text-[10px] font-black tracking-tighter text-pink-500 uppercase\" };\nconst _hoisted_29 = { class: \"text-[9px] font-medium text-slate-400 opacity-90\" };\nconst _hoisted_30 = { class: \"flex items-center gap-1.5\" };\nconst _hoisted_31 = { class: \"font-mono text-xs font-bold text-pink-500\" };\nconst _hoisted_32 = {\n    key: 0,\n    class: \"font-mono text-[10px] text-slate-400\"\n};\nconst _hoisted_33 = { class: \"h-2 w-full overflow-hidden rounded-full border border-white/10 bg-black/40\" };\nconst _hoisted_34 = {\n    key: 1,\n    class: \"rounded-2xl border border-pink-500/20 bg-gradient-to-br from-pink-500/10 to-transparent p-3.5\"\n};\nconst _hoisted_35 = { class: \"text-[12px] leading-relaxed text-slate-200 italic opacity-90\" };\nconst _hoisted_36 = {\n    key: 1,\n    class: \"glass-card rounded-2xl border-white/20 p-5\"\n};\nconst _hoisted_37 = { class: \"space-y-3\" };\nconst _hoisted_38 = [\"onClick\"];\nconst _hoisted_39 = { class: \"pt-0.5 font-mono font-bold text-pink-500 opacity-60\" };\nconst _hoisted_40 = { class: \"leading-snug text-slate-200 transition-colors group-hover:text-white\" };\nconst _hoisted_41 = { class: \"mt-6 grid grid-cols-2 gap-3\" };\nconst _hoisted_42 = [\"onClick\"];\nconst _hoisted_43 = { class: \"mb-1 text-[9px] font-black tracking-widest text-pink-500 uppercase opacity-80\" };\nconst _hoisted_44 = { class: \"text-[12px] font-bold text-slate-200 group-hover:text-white\" };\nconst _hoisted_45 = {\n    key: 0,\n    class: \"w-full max-w-xl px-3 pb-2\"\n};\nconst _hoisted_46 = { class: \"glass-card flex items-center justify-between rounded-2xl p-1\" };\nconst _hoisted_47 = [\"disabled\"];\nconst _hoisted_48 = { class: \"font-mono text-[11px] font-bold text-white\" };\nconst _hoisted_49 = [\"disabled\"];\nconst _hoisted_50 = { class: \"flex items-center justify-between border-b border-white/20 p-4\" };\nconst _hoisted_51 = { class: \"space-y-1 overflow-y-auto p-2\" };\nconst _hoisted_52 = [\"onClick\"];\nconst _hoisted_53 = { class: \"font-mono text-xs text-slate-400\" };\nconst _hoisted_54 = {\n    key: 0,\n    class: \"h-1.5 w-1.5 rounded-full bg-pink-500 shadow-[0_0_8px_rgba(236,72,153,0.5)]\"\n};\nimport { onMounted, reactive, watch, watchEffect } from 'vue';\nconst chatdata = `\n<Status_block>\n  æ—¶é—´:  Day-3 22:15\n  åœ°ç‚¹:  éœ“è™¹å¸‚ Â· åºŸå¼ƒå·¥ä¸šåŒº\n\nåå­—: è‰¾è‰ä¸\n         çŠ¶æ€: è­¦æˆ’ / ä¹‰ä½“è¿‡çƒ­\n         å…·ä½“çŠ¶æ€:\n          - è§†è§‰ä¼ æ„Ÿå™¨å—æŸ\n          - æ ¸å¿ƒæ¸©åº¦ 85Â°C\n        å¯¹xxxçš„æ€åº¦: ä¿¡ä»»ä½†å……æ»¡ç–‘è™‘\nåå­—: ç”±è‰\n         çŠ¶æ€: æ‹…å¿§\n         å…·ä½“çŠ¶æ€:\n          - è¿™é‡Œæœ‰ä¸€æ®µæ–‡å­—\n          - è¿™é‡Œæœ‰ä¸€æ®µæ–‡å­—\n        å¯¹xxxçš„æ€åº¦: è¿™é‡Œæœ‰ä¸€æ®µæ–‡å­—\n\n         å •è½å€¼: 45\n         è¿›åº¦: å¼€å§‹å •è½ï¼Œè¿›å…¥å •è½ä¸­æœŸ\n         é‡è¦äº‹é¡¹: åŒºåŸŸå†…çš„ç”µç£å¹²æ‰°æ­£åœ¨åŠ å¼ºã€‚\n\n         å¯èƒ½çš„å‘å±•:\n          -  æˆåŠŸçªç ´å°é”çº¿\n          -  é™·å…¥æ— å°½çš„å··æˆ˜\n          -  è¢«èµ¶æ¥çš„æ•Œäººå›´å›°\n      é€‰é¡¹:\n      - A. [å¼ºæ”»] é›†ä¸­ç«åŠ›æ”»å‡»æ­£é—¨ã€‚\n      - B. [æ½œå…¥] å¯»æ‰¾é€šé£ç®¡é“ç»•è¿‡å®ˆå«ã€‚\n      - C. [xx] é€‰é¡¹C\n      - D. [xx] é€‰é¡¹D\n</Status_block>\n`;\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'app',\n    setup(__props) {\n        function deepClone(obj) {\n            return JSON.parse(JSON.stringify(obj));\n        }\n        const state = reactive({\n            world: { time: '', location: '' },\n            characters: [],\n            system: {},\n            story: { potentialOutcomes: [], options: [] },\n            ui: {\n                settingsOpen: false,\n                defaultExpanded: false,\n                currentTheme: 'midnight',\n                themes: {\n                    midnight: { label: 'åˆå¤œéœ“è™¹', value: 'linear-gradient(135deg, #0f172a 0%, #1e293b 100%)' },\n                    abyss: { label: 'æ·±æ¸Šä¹‹åº•', value: 'linear-gradient(135deg, #020617 0%, #1e293b 100%)' },\n                    cyber: { label: 'èµ›åšçŸ©é˜µ', value: 'linear-gradient(135deg, #001a1a 0%, #003333 100%)' },\n                    wild: { label: 'æš®è‰²è’é‡', value: 'linear-gradient(135deg, #1a0f0f 0%, #3b1e1e 100%)' },\n                },\n                expanded: {\n                    characters: true,\n                    matters: true,\n                },\n                selectedOutcome: '',\n                selectedOptionId: '',\n                selectedOptionLabel: '',\n                floorPickerOpen: false,\n            },\n            statusFloors: [],\n            currentFloorIndex: -1,\n        });\n        function parseStatus(text) {\n            const blockMatch = text.match(/<Status_block>([\\s\\S]*?)<\\/Status_block>/);\n            if (!blockMatch)\n                return;\n            const content = blockMatch[1];\n            // Parse World\n            const timeMatch = content.match(/æ—¶é—´:\\s*(.*)/);\n            if (timeMatch)\n                state.world.time = timeMatch[1].trim();\n            const locationMatch = content.match(/åœ°ç‚¹:\\s*(.*)/);\n            if (locationMatch)\n                state.world.location = locationMatch[1].trim();\n            // Parse Characters\n            const charBlocks = content.split(/åå­—:/).slice(1);\n            state.characters = charBlocks.map(block => {\n                const lines = block.split('\\n');\n                const name = lines[0].trim();\n                const statusMatch = block.match(/çŠ¶æ€:\\s*(.*)/);\n                const attitudeMatch = block.match(/å¯¹.*çš„æ€åº¦:\\s*(.*)/);\n                const tags = [];\n                const specificStatusMatch = block.match(/å…·ä½“çŠ¶æ€:([\\s\\S]*?)(?=\\n\\s*[^-\\s].*[:ï¼š]|$)/);\n                if (specificStatusMatch) {\n                    const tagLines = specificStatusMatch[1].split('\\n');\n                    tagLines.forEach(line => {\n                        const m = line.match(/-\\s*(.*)/);\n                        if (m)\n                            tags.push(m[1].trim());\n                    });\n                }\n                return {\n                    name,\n                    status: statusMatch ? statusMatch[1].trim() : '',\n                    tags,\n                    attitude: attitudeMatch ? attitudeMatch[1].trim() : '',\n                };\n            });\n            // Parse System\n            const progressValMatch = content.match(/(.{1,4}å€¼)\\s*[:ï¼š]\\s*(\\d+)/);\n            if (progressValMatch) {\n                state.system.progressLabel = progressValMatch[1].trim();\n                const newVal = parseInt(progressValMatch[2]);\n                // è®¡ç®—å˜åŠ¨é‡\n                if (state.currentFloorIndex > 0) {\n                    const prevContent = state.statusFloors[state.currentFloorIndex - 1];\n                    const prevMatch = prevContent.match(new RegExp(`${state.system.progressLabel}\\\\s*[:ï¼š]\\\\s*(\\\\d+)`));\n                    if (prevMatch) {\n                        state.system.progressDelta = newVal - parseInt(prevMatch[1]);\n                    }\n                    else {\n                        state.system.progressDelta = undefined;\n                    }\n                }\n                else {\n                    state.system.progressDelta = undefined;\n                }\n                state.system.progress = newVal;\n            }\n            const progressStatusMatch = content.match(/è¿›åº¦:\\s*(.*)/);\n            if (progressStatusMatch)\n                state.system.progressStatus = progressStatusMatch[1].trim();\n            const importantMatch = content.match(/é‡è¦äº‹é¡¹:\\s*(.*)/);\n            if (importantMatch)\n                state.system.importantMatter = importantMatch[1].trim();\n            // Parse Story\n            const outcomesMatch = content.match(/å¯èƒ½çš„å‘å±•:([\\s\\S]*?)(?=é€‰é¡¹|$)/);\n            if (outcomesMatch) {\n                state.story.potentialOutcomes = outcomesMatch[1]\n                    .split('\\n')\n                    .map(l => l.match(/-\\s*(.*)/)?.[1]?.trim())\n                    .filter((l) => !!l);\n            }\n            const optionsMatch = content.match(/é€‰é¡¹:([\\s\\S]*?)$/);\n            if (optionsMatch) {\n                state.story.options = optionsMatch[1]\n                    .split('\\n')\n                    .map(l => {\n                    const m = l.match(/-\\s*([A-Z])\\.\\s*(.*)/);\n                    if (m)\n                        return { id: m[1], label: m[2].trim() };\n                    return null;\n                })\n                    .filter((o) => !!o);\n            }\n        }\n        function updateData() {\n            let messages = [];\n            try {\n                if (typeof getChatMessages === 'function') {\n                    messages = getChatMessages('0-{{lastMessageId}}');\n                }\n            }\n            catch (e) {\n                console.warn('Failed to get chat messages, using default data.');\n            }\n            const newFloors = [];\n            if (Array.isArray(messages)) {\n                messages.forEach(m => {\n                    if (m?.message?.includes('<Status_block>')) {\n                        newFloors.push(m.message);\n                    }\n                });\n            }\n            if (newFloors.length === 0) {\n                newFloors.push(chatdata);\n            }\n            const isAtLast = state.currentFloorIndex === state.statusFloors.length - 1 || state.currentFloorIndex === -1;\n            state.statusFloors = newFloors;\n            if (isAtLast) {\n                state.currentFloorIndex = newFloors.length - 1;\n            }\n            else {\n                // ä¿æŒå½“å‰ç´¢å¼•ï¼Œä½†ç¡®ä¿ä¸è¶Šç•Œ\n                state.currentFloorIndex = Math.min(state.currentFloorIndex, newFloors.length - 1);\n            }\n            if (state.currentFloorIndex >= 0) {\n                parseStatus(state.statusFloors[state.currentFloorIndex]);\n            }\n        }\n        function goToFloor(index) {\n            if (index >= 0 && index < state.statusFloors.length) {\n                state.currentFloorIndex = index;\n                parseStatus(state.statusFloors[index]);\n            }\n        }\n        function updateInputBox() {\n            let text = '';\n            if (state.ui.selectedOptionId) {\n                text += `${state.ui.selectedOptionId}.${state.ui.selectedOptionLabel}`;\n            }\n            if (state.ui.selectedOutcome) {\n                if (text)\n                    text += '\\n';\n                text += `ï¼ˆ${state.ui.selectedOutcome}ï¼‰`;\n            }\n            if (typeof triggerSlash === 'function') {\n                triggerSlash(`/setinput ${text}`);\n            }\n            else {\n                console.log('Set input:', text);\n            }\n        }\n        function selectOutcome(outcome) {\n            if (state.ui.selectedOutcome === outcome) {\n                state.ui.selectedOutcome = '';\n            }\n            else {\n                state.ui.selectedOutcome = outcome;\n            }\n            updateInputBox();\n        }\n        function selectOption(opt) {\n            if (state.ui.selectedOptionId === opt.id) {\n                state.ui.selectedOptionId = '';\n                state.ui.selectedOptionLabel = '';\n            }\n            else {\n                state.ui.selectedOptionId = opt.id;\n                state.ui.selectedOptionLabel = opt.label;\n            }\n            updateInputBox();\n        }\n        // æŒä¹…åŒ–è®¾ç½®åŠ è½½\n        function loadSettings() {\n            try {\n                if (typeof getVariables === 'function' && typeof getScriptId === 'function') {\n                    const savedSettings = getVariables({ type: 'script', script_id: getScriptId() });\n                    if (savedSettings && typeof savedSettings === 'object') {\n                        // æ·±åº¦åˆå¹¶ï¼Œé˜²æ­¢è¦†ç›–æ•´ä¸ª ui å¯¹è±¡\n                        Object.assign(state.ui, savedSettings);\n                    }\n                }\n            }\n            catch (e) {\n                console.warn('Failed to load settings from tavern variables.');\n            }\n        }\n        onMounted(() => {\n            loadSettings();\n            updateData();\n            // ç›‘å¬æ¶ˆæ¯å˜åŒ–\n            if (typeof eventOn === 'function') {\n                eventOn(tavern_events.CHAT_CHANGED, updateData);\n                eventOn(tavern_events.MESSAGE_UPDATED, updateData);\n            }\n            // åˆå§‹åŒ–å±•å¼€çŠ¶æ€ï¼šä»…å½“æ²¡æœ‰æ‰‹åŠ¨æ“ä½œè¿‡æ—¶æ‰åº”ç”¨é»˜è®¤å€¼\n            state.ui.expanded.characters = state.ui.defaultExpanded;\n            state.ui.expanded.matters = state.ui.defaultExpanded;\n        });\n        // ç›‘å¬é»˜è®¤å±•å¼€è®¾ç½®çš„å˜åŒ–ï¼Œå®æ—¶åº”ç”¨\n        watch(() => state.ui.defaultExpanded, newVal => {\n            state.ui.expanded.characters = newVal;\n            state.ui.expanded.matters = newVal;\n        });\n        watchEffect(() => {\n            try {\n                if (typeof replaceVariables === 'function' && typeof getScriptId === 'function') {\n                    replaceVariables(deepClone(state.ui), { type: 'script', script_id: getScriptId() });\n                }\n            }\n            catch (e) {\n                // Ignore error in non-tavern environment\n            }\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n                class: \"relative mx-auto flex w-fit max-w-[100vw] flex-col items-center overflow-hidden rounded-3xl transition-all duration-700 sm:max-w-xl\",\n                style: _normalizeStyle({ background: state.ui.themes[state.ui.currentTheme].value })\n            }, [\n                _createCommentVNode(\" é¡¶éƒ¨çŠ¶æ€æ  \"),\n                _createElementVNode(\"nav\", _hoisted_1, [\n                    _createElementVNode(\"div\", _hoisted_2, [\n                        _createElementVNode(\"span\", _hoisted_3, [\n                            _cache[11] || (_cache[11] = _createTextVNode(\"ğŸ—ºï¸ \", -1 /* CACHED */)),\n                            _createElementVNode(\"span\", _hoisted_4, _toDisplayString(state.world.location || 'æœªçŸ¥åœ°ç‚¹'), 1 /* TEXT */)\n                        ]),\n                        _createElementVNode(\"span\", _hoisted_5, [\n                            _cache[12] || (_cache[12] = _createTextVNode(\"â° \", -1 /* CACHED */)),\n                            _createElementVNode(\"span\", null, _toDisplayString(state.world.time || 'æœªçŸ¥æ—¶é—´'), 1 /* TEXT */)\n                        ])\n                    ]),\n                    _createElementVNode(\"div\", _hoisted_6, [\n                        _createElementVNode(\"div\", _hoisted_7, [\n                            _createElementVNode(\"button\", {\n                                class: \"group flex items-center gap-1.5 rounded-lg p-1.5 transition-all hover:bg-white/10 focus:outline-none\",\n                                onClick: _cache[0] || (_cache[0] = _withModifiers(($event) => (state.ui.settingsOpen = !state.ui.settingsOpen), [\"stop\"]))\n                            }, [\n                                (_openBlock(), _createElementBlock(\"svg\", {\n                                    class: _normalizeClass([\n                                        'h-4 w-4 transition-transform duration-700',\n                                        state.ui.settingsOpen ? 'rotate-90 text-pink-500' : 'opacity-70 group-hover:opacity-100',\n                                    ]),\n                                    fill: \"none\",\n                                    viewBox: \"0 0 24 24\",\n                                    stroke: \"currentColor\"\n                                }, [...(_cache[13] || (_cache[13] = [\n                                        _createElementVNode(\"path\", {\n                                            \"stroke-linecap\": \"round\",\n                                            \"stroke-linejoin\": \"round\",\n                                            \"stroke-width\": \"2\",\n                                            d: \"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z\"\n                                        }, null, -1 /* CACHED */),\n                                        _createElementVNode(\"path\", {\n                                            \"stroke-linecap\": \"round\",\n                                            \"stroke-linejoin\": \"round\",\n                                            \"stroke-width\": \"2\",\n                                            d: \"M15 12a3 3 0 11-6 0 3 3 0 016 0z\"\n                                        }, null, -1 /* CACHED */)\n                                    ]))], 2 /* CLASS */)),\n                                _cache[14] || (_cache[14] = _createElementVNode(\"span\", { class: \"text-[9px] tracking-tighter uppercase opacity-40 transition-opacity group-hover:opacity-100\" }, \"è®¾ç½®\", -1 /* CACHED */))\n                            ]),\n                            _createCommentVNode(\" è®¾ç½®ä¸‹æ‹‰èœå• \"),\n                            _createVNode(_Transition, { name: \"fade\" }, {\n                                default: _withCtx(() => [\n                                    (state.ui.settingsOpen)\n                                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, [\n                                            _createElementVNode(\"div\", _hoisted_9, [\n                                                _createElementVNode(\"div\", null, [\n                                                    _cache[17] || (_cache[17] = _createElementVNode(\"div\", { class: \"mb-3 border-b border-white/20 pb-1 text-[9px] font-bold tracking-widest text-pink-500/60 uppercase\" }, \" é¢„è®¾åå¥½ \", -1 /* CACHED */)),\n                                                    _createElementVNode(\"div\", _hoisted_10, [\n                                                        _cache[16] || (_cache[16] = _createElementVNode(\"span\", { class: \"text-[10px] text-slate-300\" }, \"é¢æ¿é»˜è®¤å±•å¼€\", -1 /* CACHED */)),\n                                                        _createElementVNode(\"label\", _hoisted_11, [\n                                                            _withDirectives(_createElementVNode(\"input\", {\n                                                                \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event) => ((state.ui.defaultExpanded) = $event)),\n                                                                type: \"checkbox\"\n                                                            }, null, 512 /* NEED_PATCH */), [\n                                                                [_vModelCheckbox, state.ui.defaultExpanded]\n                                                            ]),\n                                                            _cache[15] || (_cache[15] = _createElementVNode(\"span\", { class: \"slider\" }, null, -1 /* CACHED */))\n                                                        ])\n                                                    ])\n                                                ]),\n                                                _createElementVNode(\"div\", null, [\n                                                    _cache[18] || (_cache[18] = _createElementVNode(\"div\", { class: \"mb-3 border-b border-white/20 pb-1 text-[9px] font-bold tracking-widest text-pink-500/60 uppercase\" }, \" è§†è§‰ç¯å¢ƒ \", -1 /* CACHED */)),\n                                                    _createElementVNode(\"div\", _hoisted_12, [\n                                                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(state.ui.themes, (theme, key) => {\n                                                            return (_openBlock(), _createElementBlock(\"button\", {\n                                                                key: key,\n                                                                class: _normalizeClass([\n                                                                    'flex h-8 items-center justify-center rounded-lg border text-[9px] font-medium transition-all',\n                                                                    state.ui.currentTheme === key\n                                                                        ? 'border-pink-500 bg-pink-500/20 text-pink-300 shadow-[0_0_8px_rgba(236,72,153,0.2)]'\n                                                                        : 'border-white/20 text-white/60 hover:border-white/30',\n                                                                ]),\n                                                                onClick: ($event) => (state.ui.currentTheme = key)\n                                                            }, _toDisplayString(theme.label), 11 /* TEXT, CLASS, PROPS */, _hoisted_13));\n                                                        }), 128 /* KEYED_FRAGMENT */))\n                                                    ])\n                                                ])\n                                            ])\n                                        ]))\n                                        : _createCommentVNode(\"v-if\", true)\n                                ]),\n                                _: 1 /* STABLE */\n                            })\n                        ])\n                    ])\n                ]),\n                _createCommentVNode(\" ä¸»å®¹å™¨ \"),\n                _createElementVNode(\"main\", {\n                    class: \"flex w-full max-w-xl flex-col gap-4 p-3 pt-4\",\n                    onClick: _cache[4] || (_cache[4] = ($event) => (state.ui.settingsOpen = false))\n                }, [\n                    _createCommentVNode(\" è§’è‰²é¢æ¿ \"),\n                    (state.characters.length > 0)\n                        ? (_openBlock(), _createElementBlock(\"section\", _hoisted_14, [\n                            _createElementVNode(\"button\", {\n                                class: \"flex w-full items-center justify-between px-4 py-3 transition-colors hover:bg-white/5\",\n                                onClick: _cache[2] || (_cache[2] = ($event) => (state.ui.expanded.characters = !state.ui.expanded.characters))\n                            }, [\n                                _cache[20] || (_cache[20] = _createElementVNode(\"span\", { class: \"flex items-center gap-2 text-[11px] font-bold tracking-widest text-slate-300 uppercase\" }, [\n                                    _createElementVNode(\"span\", { class: \"h-1.5 w-1.5 animate-pulse rounded-full bg-pink-500\" }),\n                                    _createTextVNode(\" è§’è‰²çŠ¶æ€ç›‘æ§ \")\n                                ], -1 /* CACHED */)),\n                                (_openBlock(), _createElementBlock(\"svg\", {\n                                    class: _normalizeClass([\n                                        'h-4 w-4 opacity-40 transition-transform duration-300',\n                                        state.ui.expanded.characters ? 'rotate-180' : '',\n                                    ]),\n                                    fill: \"none\",\n                                    viewBox: \"0 0 24 24\",\n                                    stroke: \"currentColor\"\n                                }, [...(_cache[19] || (_cache[19] = [\n                                        _createElementVNode(\"path\", {\n                                            \"stroke-linecap\": \"round\",\n                                            \"stroke-linejoin\": \"round\",\n                                            \"stroke-width\": \"2\",\n                                            d: \"M19 9l-7 7-7-7\"\n                                        }, null, -1 /* CACHED */)\n                                    ]))], 2 /* CLASS */))\n                            ]),\n                            _createVNode(_Transition, { name: \"collapse\" }, {\n                                default: _withCtx(() => [\n                                    (state.ui.expanded.characters)\n                                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_15, [\n                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(state.characters, (char, index) => {\n                                                return (_openBlock(), _createElementBlock(\"div\", {\n                                                    key: index,\n                                                    class: \"group relative\"\n                                                }, [\n                                                    _createElementVNode(\"div\", _hoisted_16, [\n                                                        _createElementVNode(\"span\", _hoisted_17, _toDisplayString(char.name), 1 /* TEXT */),\n                                                        _createElementVNode(\"span\", _hoisted_18, _toDisplayString(char.status), 1 /* TEXT */)\n                                                    ]),\n                                                    _createElementVNode(\"div\", _hoisted_19, [\n                                                        _createElementVNode(\"div\", null, [\n                                                            _cache[21] || (_cache[21] = _createElementVNode(\"div\", { class: \"mb-1.5 text-[8px] font-bold tracking-wider text-slate-500 uppercase\" }, \"å…·ä½“çŠ¶æ€\", -1 /* CACHED */)),\n                                                            _createElementVNode(\"div\", _hoisted_20, [\n                                                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(char.tags, (tag) => {\n                                                                    return (_openBlock(), _createElementBlock(\"span\", {\n                                                                        key: tag,\n                                                                        class: \"rounded-md border border-white/20 bg-white/10 px-2 py-0.5 text-[10px] text-slate-300\"\n                                                                    }, _toDisplayString(tag), 1 /* TEXT */));\n                                                                }), 128 /* KEYED_FRAGMENT */))\n                                                            ])\n                                                        ]),\n                                                        _createElementVNode(\"div\", _hoisted_21, [\n                                                            _cache[22] || (_cache[22] = _createElementVNode(\"div\", { class: \"mb-1.5 text-[8px] font-bold tracking-wider text-slate-500 uppercase\" }, \"æ€åº¦\", -1 /* CACHED */)),\n                                                            _createElementVNode(\"div\", _hoisted_22, _toDisplayString(char.attitude), 1 /* TEXT */)\n                                                        ])\n                                                    ])\n                                                ]));\n                                            }), 128 /* KEYED_FRAGMENT */))\n                                        ]))\n                                        : _createCommentVNode(\"v-if\", true)\n                                ]),\n                                _: 1 /* STABLE */\n                            })\n                        ]))\n                        : _createCommentVNode(\"v-if\", true),\n                    _createCommentVNode(\" ç³»ç»Ÿä¸äº‹é¡¹é¢æ¿ \"),\n                    _createElementVNode(\"section\", _hoisted_23, [\n                        _createElementVNode(\"button\", {\n                            class: \"flex w-full items-center justify-between px-4 py-3 transition-colors hover:bg-white/5\",\n                            onClick: _cache[3] || (_cache[3] = ($event) => (state.ui.expanded.matters = !state.ui.expanded.matters))\n                        }, [\n                            _cache[24] || (_cache[24] = _createElementVNode(\"span\", { class: \"flex items-center gap-2 text-[11px] font-bold tracking-widest text-slate-300 uppercase\" }, [\n                                _createElementVNode(\"span\", { class: \"h-1.5 w-1.5 rounded-full bg-blue-500 shadow-[0_0_8px_rgba(59,130,246,0.5)]\" }),\n                                _createTextVNode(\" äº‹ä»¶è„‰ç»œè®°å½• \")\n                            ], -1 /* CACHED */)),\n                            (_openBlock(), _createElementBlock(\"svg\", {\n                                class: _normalizeClass([\n                                    'h-4 w-4 opacity-40 transition-transform duration-300',\n                                    state.ui.expanded.matters ? 'rotate-180' : '',\n                                ]),\n                                fill: \"none\",\n                                viewBox: \"0 0 24 24\",\n                                stroke: \"currentColor\"\n                            }, [...(_cache[23] || (_cache[23] = [\n                                    _createElementVNode(\"path\", {\n                                        \"stroke-linecap\": \"round\",\n                                        \"stroke-linejoin\": \"round\",\n                                        \"stroke-width\": \"2\",\n                                        d: \"M19 9l-7 7-7-7\"\n                                    }, null, -1 /* CACHED */)\n                                ]))], 2 /* CLASS */))\n                        ]),\n                        _createVNode(_Transition, { name: \"collapse\" }, {\n                            default: _withCtx(() => [\n                                (state.ui.expanded.matters)\n                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_24, [\n                                        (state.system.progress !== undefined)\n                                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_25, [\n                                                _createElementVNode(\"div\", _hoisted_26, [\n                                                    _createElementVNode(\"div\", _hoisted_27, [\n                                                        _createElementVNode(\"span\", _hoisted_28, _toDisplayString(state.system.progressLabel || 'è¿›åº¦'), 1 /* TEXT */),\n                                                        _createElementVNode(\"span\", _hoisted_29, _toDisplayString(state.system.progressStatus), 1 /* TEXT */)\n                                                    ]),\n                                                    _createElementVNode(\"div\", _hoisted_30, [\n                                                        _createElementVNode(\"span\", _hoisted_31, _toDisplayString(state.system.progress) + \"%\", 1 /* TEXT */),\n                                                        (state.system.progressDelta !== undefined)\n                                                            ? (_openBlock(), _createElementBlock(\"span\", _hoisted_32, \" (\" + _toDisplayString(state.system.progressDelta >= 0 ? '+' : '') + _toDisplayString(state.system.progressDelta) + \"%) \", 1 /* TEXT */))\n                                                            : _createCommentVNode(\"v-if\", true)\n                                                    ])\n                                                ]),\n                                                _createElementVNode(\"div\", _hoisted_33, [\n                                                    _createElementVNode(\"div\", {\n                                                        class: \"pink-glow h-full bg-gradient-to-r from-pink-600 to-pink-400 transition-all duration-1000 ease-out\",\n                                                        style: _normalizeStyle({ width: state.system.progress + '%' })\n                                                    }, null, 4 /* STYLE */)\n                                                ])\n                                            ]))\n                                            : _createCommentVNode(\"v-if\", true),\n                                        (state.system.importantMatter)\n                                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_34, [\n                                                _cache[25] || (_cache[25] = _createElementVNode(\"div\", { class: \"mb-2 flex items-center gap-1.5 text-[10px] font-black tracking-widest text-pink-400 uppercase\" }, [\n                                                    _createElementVNode(\"svg\", {\n                                                        class: \"h-3.5 w-3.5\",\n                                                        fill: \"none\",\n                                                        viewBox: \"0 0 24 24\",\n                                                        stroke: \"currentColor\"\n                                                    }, [\n                                                        _createElementVNode(\"path\", {\n                                                            \"stroke-linecap\": \"round\",\n                                                            \"stroke-linejoin\": \"round\",\n                                                            \"stroke-width\": \"2\",\n                                                            d: \"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\"\n                                                        })\n                                                    ]),\n                                                    _createTextVNode(\" é‡è¦äº‹é¡¹ \")\n                                                ], -1 /* CACHED */)),\n                                                _createElementVNode(\"p\", _hoisted_35, _toDisplayString(state.system.importantMatter), 1 /* TEXT */)\n                                            ]))\n                                            : _createCommentVNode(\"v-if\", true)\n                                    ]))\n                                    : _createCommentVNode(\"v-if\", true)\n                            ]),\n                            _: 1 /* STABLE */\n                        })\n                    ]),\n                    _createCommentVNode(\" å‰§æƒ…èµ°å‘é¢æ¿ \"),\n                    (state.story.potentialOutcomes.length > 0 || state.story.options.length > 0)\n                        ? (_openBlock(), _createElementBlock(\"section\", _hoisted_36, [\n                            _cache[27] || (_cache[27] = _createElementVNode(\"h2\", { class: \"mb-5 flex items-center gap-2 text-[11px] font-black tracking-[0.3em] text-pink-500 uppercase\" }, [\n                                _createElementVNode(\"span\", { class: \"h-3.5 w-1 rounded-full bg-pink-500\" }),\n                                _createTextVNode(\" å‰§æƒ…å³æ—¶èµ°å‘ \")\n                            ], -1 /* CACHED */)),\n                            _createElementVNode(\"div\", _hoisted_37, [\n                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(state.story.potentialOutcomes, (outcome, index) => {\n                                    return (_openBlock(), _createElementBlock(\"div\", {\n                                        key: index,\n                                        class: _normalizeClass([\"group flex cursor-pointer items-start gap-3 rounded-xl border border-white/20 bg-white/5 px-4 py-3 text-[12px] transition-all hover:border-pink-500/40 hover:bg-white/10\", { 'border-pink-500/60 bg-pink-500/10': state.ui.selectedOutcome === outcome }]),\n                                        onClick: ($event) => (selectOutcome(outcome))\n                                    }, [\n                                        _createElementVNode(\"span\", _hoisted_39, \"0\" + _toDisplayString(index + 1), 1 /* TEXT */),\n                                        _createElementVNode(\"span\", _hoisted_40, _toDisplayString(outcome), 1 /* TEXT */)\n                                    ], 10 /* CLASS, PROPS */, _hoisted_38));\n                                }), 128 /* KEYED_FRAGMENT */))\n                            ]),\n                            _createElementVNode(\"div\", _hoisted_41, [\n                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(state.story.options, (opt) => {\n                                    return (_openBlock(), _createElementBlock(\"button\", {\n                                        key: opt.id,\n                                        class: _normalizeClass([\"glass-card group relative overflow-hidden rounded-2xl p-4 text-left hover:border-pink-500/40 hover:bg-pink-500/10 active:scale-[0.98]\", { 'border-pink-500/60 bg-pink-500/20': state.ui.selectedOptionId === opt.id }]),\n                                        onClick: ($event) => (selectOption(opt))\n                                    }, [\n                                        _cache[26] || (_cache[26] = _createElementVNode(\"div\", { class: \"absolute top-0 right-0 h-12 w-12 translate-x-6 -translate-y-6 rotate-45 bg-pink-500/5\" }, null, -1 /* CACHED */)),\n                                        _createElementVNode(\"div\", _hoisted_43, \" æŒ‡ä»¤ \" + _toDisplayString(opt.id), 1 /* TEXT */),\n                                        _createElementVNode(\"div\", _hoisted_44, _toDisplayString(opt.label), 1 /* TEXT */)\n                                    ], 10 /* CLASS, PROPS */, _hoisted_42));\n                                }), 128 /* KEYED_FRAGMENT */))\n                            ])\n                        ]))\n                        : _createCommentVNode(\"v-if\", true)\n                ]),\n                _createCommentVNode(\" åº•éƒ¨å¯¼èˆªæ  \"),\n                (state.statusFloors.length > 1)\n                    ? (_openBlock(), _createElementBlock(\"footer\", _hoisted_45, [\n                        _createElementVNode(\"div\", _hoisted_46, [\n                            _createElementVNode(\"button\", {\n                                class: \"rounded-xl p-1.5 text-white transition-colors hover:bg-white/10 disabled:opacity-20\",\n                                disabled: state.currentFloorIndex <= 0,\n                                onClick: _cache[5] || (_cache[5] = ($event) => (goToFloor(state.currentFloorIndex - 1)))\n                            }, [...(_cache[28] || (_cache[28] = [\n                                    _createElementVNode(\"svg\", {\n                                        class: \"h-4 w-4\",\n                                        fill: \"none\",\n                                        viewBox: \"0 0 24 24\",\n                                        stroke: \"currentColor\"\n                                    }, [\n                                        _createElementVNode(\"path\", {\n                                            \"stroke-linecap\": \"round\",\n                                            \"stroke-linejoin\": \"round\",\n                                            \"stroke-width\": \"2\",\n                                            d: \"M15 19l-7-7 7-7\"\n                                        })\n                                    ], -1 /* CACHED */)\n                                ]))], 8 /* PROPS */, _hoisted_47),\n                            _createElementVNode(\"div\", {\n                                class: \"flex cursor-pointer flex-col items-center transition-colors hover:text-pink-400\",\n                                onClick: _cache[6] || (_cache[6] = ($event) => (state.ui.floorPickerOpen = true))\n                            }, [\n                                _createElementVNode(\"span\", _hoisted_48, _toDisplayString(state.currentFloorIndex + 1) + \" / \" + _toDisplayString(state.statusFloors.length), 1 /* TEXT */)\n                            ]),\n                            _createElementVNode(\"button\", {\n                                class: \"rounded-xl p-1.5 text-white transition-colors hover:bg-white/10 disabled:opacity-20\",\n                                disabled: state.currentFloorIndex >= state.statusFloors.length - 1,\n                                onClick: _cache[7] || (_cache[7] = ($event) => (goToFloor(state.currentFloorIndex + 1)))\n                            }, [...(_cache[29] || (_cache[29] = [\n                                    _createElementVNode(\"svg\", {\n                                        class: \"h-4 w-4\",\n                                        fill: \"none\",\n                                        viewBox: \"0 0 24 24\",\n                                        stroke: \"currentColor\"\n                                    }, [\n                                        _createElementVNode(\"path\", {\n                                            \"stroke-linecap\": \"round\",\n                                            \"stroke-linejoin\": \"round\",\n                                            \"stroke-width\": \"2\",\n                                            d: \"M9 5l7 7-7 7\"\n                                        })\n                                    ], -1 /* CACHED */)\n                                ]))], 8 /* PROPS */, _hoisted_49)\n                        ])\n                    ]))\n                    : _createCommentVNode(\"v-if\", true),\n                _createCommentVNode(\" æ¥¼å±‚é€‰æ‹©å¼¹çª— \"),\n                _createVNode(_Transition, { name: \"fade\" }, {\n                    default: _withCtx(() => [\n                        (state.ui.floorPickerOpen)\n                            ? (_openBlock(), _createElementBlock(\"div\", {\n                                key: 0,\n                                class: \"fixed inset-0 z-[300] flex items-center justify-center bg-black/60 p-6 backdrop-blur-sm\",\n                                onClick: _cache[10] || (_cache[10] = ($event) => (state.ui.floorPickerOpen = false))\n                            }, [\n                                _createElementVNode(\"div\", {\n                                    class: \"glass-card flex max-h-[70vh] w-full max-w-xs flex-col overflow-hidden rounded-3xl\",\n                                    onClick: _cache[9] || (_cache[9] = _withModifiers(() => { }, [\"stop\"]))\n                                }, [\n                                    _createElementVNode(\"div\", _hoisted_50, [\n                                        _cache[31] || (_cache[31] = _createElementVNode(\"span\", { class: \"text-sm font-bold tracking-widest text-slate-400 uppercase\" }, \"é€‰æ‹©æ¥¼å±‚\", -1 /* CACHED */)),\n                                        _createElementVNode(\"button\", {\n                                            class: \"opacity-50 hover:opacity-100\",\n                                            onClick: _cache[8] || (_cache[8] = ($event) => (state.ui.floorPickerOpen = false))\n                                        }, [...(_cache[30] || (_cache[30] = [\n                                                _createElementVNode(\"svg\", {\n                                                    class: \"h-5 w-5\",\n                                                    fill: \"none\",\n                                                    viewBox: \"0 0 24 24\",\n                                                    stroke: \"currentColor\"\n                                                }, [\n                                                    _createElementVNode(\"path\", {\n                                                        \"stroke-linecap\": \"round\",\n                                                        \"stroke-linejoin\": \"round\",\n                                                        \"stroke-width\": \"2\",\n                                                        d: \"M6 18L18 6M6 6l12 12\"\n                                                    })\n                                                ], -1 /* CACHED */)\n                                            ]))])\n                                    ]),\n                                    _createElementVNode(\"div\", _hoisted_51, [\n                                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(state.statusFloors, (floor, index) => {\n                                            return (_openBlock(), _createElementBlock(\"button\", {\n                                                key: index,\n                                                class: _normalizeClass([\"group flex w-full items-center justify-between rounded-xl p-3 text-left transition-all\",\n                                                    state.currentFloorIndex === index\n                                                        ? 'border border-pink-500/30 bg-pink-500/20 text-pink-300'\n                                                        : 'hover:bg-white/5'\n                                                ]),\n                                                onClick: ($event) => {\n                                                    goToFloor(index);\n                                                    state.ui.floorPickerOpen = false;\n                                                }\n                                            }, [\n                                                _createElementVNode(\"span\", _hoisted_53, \"Floor \" + _toDisplayString(index + 1), 1 /* TEXT */),\n                                                (state.currentFloorIndex === index)\n                                                    ? (_openBlock(), _createElementBlock(\"span\", _hoisted_54))\n                                                    : _createCommentVNode(\"v-if\", true)\n                                            ], 10 /* CLASS, PROPS */, _hoisted_52));\n                                        }), 128 /* KEYED_FRAGMENT */))\n                                    ])\n                                ])\n                            ]))\n                            : _createCommentVNode(\"v-if\", true)\n                    ]),\n                    _: 1 /* STABLE */\n                })\n            ], 4 /* STYLE */));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./app.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./app.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./app.vue?vue&type=style&index=0&id=3f662459&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { createApp } from 'vue';\nimport app from './app.vue';\n\n$(() => {\n  createApp(app).mount('#app');\n});\n"],"names":["Vue","_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","key","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33","_hoisted_34","_hoisted_35","_hoisted_36","_hoisted_37","_hoisted_38","_hoisted_39","_hoisted_40","_hoisted_41","_hoisted_42","_hoisted_43","_hoisted_44","_hoisted_45","_hoisted_46","_hoisted_47","_hoisted_48","_hoisted_49","_hoisted_50","_hoisted_51","_hoisted_52","_hoisted_53","_hoisted_54","__name","setup","__props","state","reactive","world","time","location","characters","system","story","potentialOutcomes","options","ui","settingsOpen","defaultExpanded","currentTheme","themes","midnight","label","value","abyss","cyber","wild","expanded","matters","selectedOutcome","selectedOptionId","selectedOptionLabel","floorPickerOpen","statusFloors","currentFloorIndex","parseStatus","text","blockMatch","match","content","timeMatch","trim","locationMatch","charBlocks","split","slice","map","block","name","statusMatch","attitudeMatch","tags","specificStatusMatch","forEach","line","m","push","status","attitude","progressValMatch","progressLabel","newVal","parseInt","prevMatch","RegExp","progressDelta","undefined","progress","progressStatusMatch","progressStatus","importantMatch","importantMatter","outcomesMatch","l","filter","optionsMatch","id","o","updateData","messages","getChatMessages","e","console","warn","newFloors","Array","isArray","message","includes","length","isAtLast","Math","min","goToFloor","index","updateInputBox","triggerSlash","log","onMounted","getVariables","getScriptId","savedSettings","type","script_id","Object","assign","loadSettings","eventOn","tavern_events","CHAT_CHANGED","MESSAGE_UPDATED","watch","watchEffect","replaceVariables","obj","JSON","parse","stringify","_ctx","_cache","style","background","onClick","$event","fill","viewBox","stroke","d","default","theme","_","char","tag","width","outcome","opt","disabled","floor","$","createApp","app","mount"],"ignoreList":[],"sourceRoot":""}
=======
{"version":3,"file":"index.js","mappings":"AAAA,MAAM,EAA+BA,ICE/BC,EAAa,CAAEC,MAAO,gIACtBC,EAAa,CAAED,MAAO,2BACtBE,EAAa,CAAEF,MAAO,wCACtBG,EAAa,CAAEH,MAAO,kBACtBI,EAAa,CAAEJ,MAAO,kEACtBK,EAAa,CACfC,IAAK,EACLN,MAAO,sCAELO,EAAa,CAAEP,MAAO,kBACtBQ,EAAa,CACfF,IAAK,EACLN,MAAO,wFAELS,EAAa,CAAET,MAAO,2BACtBU,EAAc,CAAEV,MAAO,8BACvBW,EAAc,CAChBL,IAAK,EACLN,MAAO,0HAELY,EAAc,CAAEZ,MAAO,iBACvBa,EAAc,CAAEb,MAAO,qCACvBc,EAAc,CAAEd,MAAO,UACvBe,EAAc,CAAEf,MAAO,0BACvBgB,EAAc,CAAC,WACfC,EAAc,CAChBX,IAAK,EACLN,MAAO,0CAELkB,EAAc,CAChBZ,IAAK,EACLN,MAAO,qDAELmB,EAAc,CAAEnB,MAAO,4CACvBoB,EAAc,CAAEpB,MAAO,uCACvBqB,EAAc,CAAErB,MAAO,iFACvBsB,EAAc,CAAEtB,MAAO,4EACvBuB,EAAc,CAAEjB,IAAK,GACrBkB,EAAc,CAAExB,MAAO,8EACvByB,EAAc,CAAEzB,MAAO,qDACvB0B,EAAc,CAAE1B,MAAO,aACvB2B,EAAc,CAAE3B,MAAO,uDACvB4B,EAAc,CAAE5B,MAAO,0CACvB6B,EAAc,CAChBvB,IAAK,EACLN,MAAO,qDAEL8B,EAAc,CAAExB,IAAK,GACrByB,EAAc,CAAE/B,MAAO,uCACvBgC,EAAc,CAAEhC,MAAO,iBACvBiC,EAAc,CAAEjC,MAAO,mEACvBkC,EAAc,CAAElC,MAAO,oDACvBmC,EAAc,CAAEnC,MAAO,6BACvBoC,EAAc,CAAEpC,MAAO,6CACvBqC,EAAc,CAChB/B,IAAK,EACLN,MAAO,wCAELsC,EAAc,CAAEtC,MAAO,8EACvBuC,EAAc,CAChBjC,IAAK,EACLN,MAAO,iGAELwC,EAAc,CAAExC,MAAO,eACvByC,EAAc,CAChBnC,IAAK,EACLN,MAAO,8CAEL0C,EAAc,CAAE1C,MAAO,aACvB2C,EAAc,CAAC,WACfC,EAAc,CAAE5C,MAAO,uDACvB6C,EAAc,CAAE7C,MAAO,wEACvB8C,EAAc,CAAE9C,MAAO,+BACvB+C,EAAc,CAAC,WACfC,EAAc,CAAEhD,MAAO,iFACvBiD,EAAc,CAAEjD,MAAO,+DACvBkD,EAAc,CAChB5C,IAAK,EACLN,MAAO,6BAELmD,GAAc,CAAEnD,MAAO,gEACvBoD,GAAc,CAAC,YACfC,GAAc,CAAErD,MAAO,8CACvBsD,GAAc,CAAC,YACfC,GAAc,CAAEvD,MAAO,kEACvBwD,GAAc,CAAExD,MAAO,iCACvByD,GAAc,CAAC,WACfC,GAAc,CAAE1D,MAAO,oCACvB2D,GAAc,CAChBrD,IAAK,EACLN,MAAO,8ECrFX,IDuH6B,qBAAiB,CAC1C4D,OAAQ,MACR,KAAAC,CAAMC,IAIF,MAAMC,IAAQ,IAAAC,UAAS,CACnBC,MAAO,CAAEC,KAAM,GAAIC,SAAU,GAAIC,QAAS,GAAIC,QAAS,IACvDC,WAAY,GACZC,OAAQ,CAAEC,iBAAkB,IAC5BC,MAAO,CAAEC,kBAAmB,GAAIC,QAAS,IACzCC,GAAI,CACAC,cAAc,EACdC,iBAAiB,EACjBC,aAAc,WACdC,OAAQ,CACJC,SAAU,CAAEC,MAAO,OAAQC,MAAO,qDAClCC,MAAO,CAAEF,MAAO,OAAQC,MAAO,qDAC/BE,MAAO,CAAEH,MAAO,OAAQC,MAAO,qDAC/BG,KAAM,CAAEJ,MAAO,OAAQC,MAAO,sDAElCI,SAAU,CACNjB,YAAY,EACZkB,SAAS,GAEbC,gBAAiB,GACjBC,iBAAkB,GAClBC,oBAAqB,GACrBC,iBAAiB,GAErBC,aAAc,GACdC,mBAAoB,IAElBC,IAAc,IAAAC,UAAS,KACX,CACV,GAAI,KACJ,GAAI,KACJ,GAAI,MACJ,GAAI,MACJ,GAAI,KACJ,GAAI,MAEKjC,GAAME,MAAMG,UAAY,QAEnC6B,IAAe,IAAAD,UAAS,KACX,CACX,EAAK,gBACL,EAAK,iBACL,EAAK,kBACL,EAAK,kBACL,EAAK,gBAEKjC,GAAME,MAAMI,UAAY,mBAE1C,SAAS6B,GAAYC,GACjB,MAAMC,EAAaD,EAAKE,MAAM,4CAC9B,IAAKD,EACD,OACJ,MAAME,EAAUF,EAAW,GAErBG,EAAYD,EAAQD,MAAM,cAC5BE,IACAxC,GAAME,MAAMC,KAAOqC,EAAU,GAAGC,QACpC,MAAMC,EAAgBH,EAAQD,MAAM,cAChCI,IACA1C,GAAME,MAAME,SAAWsC,EAAc,GAAGD,QAC5C,MAAME,EAAeJ,EAAQD,MAAM,cAC/BK,IACA3C,GAAME,MAAMG,QAAUsC,EAAa,GAAGF,QAC1C,MAAMG,EAAeL,EAAQD,MAAM,cAC/BM,IACA5C,GAAME,MAAMI,QAAUsC,EAAa,GAAGH,QAE1C,MAAMI,EAAaN,EAAQO,MAAM,OAAOC,MAAM,GAC9C/C,GAAMO,WAAasC,EAAWG,IAAIC,IAC9B,MACMC,EADQD,EAAMH,MAAM,MACP,GAAGL,OAChBU,EAAYF,EAAMX,MAAM,gBACxBc,EAAcH,EAAMX,MAAM,cAC1Be,EAAgBJ,EAAMX,MAAM,kBAClC,MAAO,CACHY,OACAI,YAAaH,EAAYA,EAAU,GAAGV,OAAS,GAC/Cc,OAAQH,EAAcA,EAAY,GAAGX,OAAS,GAC9Ce,SAAUH,EAAgBA,EAAc,GAAGZ,OAAS,MAK5D,MAAMgB,EAAmBlB,EAAQD,MAAM,iCACvC,GAAImB,EAAkB,CAClBzD,GAAMQ,OAAOkD,cAAgBD,EAAiB,GAAGhB,OACjD,MAAMkB,EAASC,SAASH,EAAiB,IAEzC,GAAIzD,GAAM+B,kBAAoB,EAAG,CAC7B,MACM8B,EADc7D,GAAM8B,aAAa9B,GAAM+B,kBAAoB,GACnCO,MAAM,IAAIwB,OAAO,IAAI9D,GAAMQ,OAAOkD,qCAE5D1D,GAAMQ,OAAOuD,cADbF,EAC6BF,EAASC,SAASC,EAAU,SAG5BG,CAErC,MAEIhE,GAAMQ,OAAOuD,mBAAgBC,EAEjChE,GAAMQ,OAAOyD,SAAWN,CAC5B,CACA,MAAMO,EAAsB3B,EAAQD,MAAM,cACtC4B,IACAlE,GAAMQ,OAAO2D,eAAiBD,EAAoB,GAAGzB,QACzD,MAAM2B,EAAiB7B,EAAQD,MAAM,gBACjC8B,IACApE,GAAMQ,OAAOC,iBAAmB2D,EAAe,GAC1CtB,MAAM,KACNE,IAAIqB,GAAQA,EAAK5B,QACjB6B,OAAOD,GAAQA,EAAKE,OAAS,IAGtC,MAAMC,EAAgBjC,EAAQD,MAAM,4BAChCkC,IACAxE,GAAMU,MAAMC,kBAAoB6D,EAAc,GACzC1B,MAAM,MACNE,IAAIyB,GAAKA,EAAEnC,MAAM,cAAc,IAAIG,QACnC6B,OAAQG,KAAQA,IAEzB,MAAMC,EAAenC,EAAQD,MAAM,kBAC/BoC,IACA1E,GAAMU,MAAME,QAAU8D,EAAa,GAC9B5B,MAAM,MACNE,IAAIyB,IACL,MAAME,EAAIF,EAAEnC,MAAM,wBAClB,OAAIqC,EACO,CAAEC,GAAID,EAAE,GAAIxD,MAAOwD,EAAE,GAAGlC,QAC5B,OAEN6B,OAAQO,KAAQA,GAE7B,CACA,SAASC,KACL,IAAIC,EAAW,GACf,IACmC,mBAApBC,kBACPD,EAAWC,gBAAgB,uBAEnC,CACA,MAAOC,GACHC,QAAQC,KAAK,mDACjB,CACA,MAAMC,EAAY,GACdC,MAAMC,QAAQP,IACdA,EAASQ,QAAQZ,IACTA,GAAGa,SAASC,SAAS,mBACrBL,EAAUM,KAAKf,EAAEa,WAIJ,IAArBJ,EAAUb,QACVa,EAAUM,KA9LT,4hBAgML,MAAMC,EAAW3F,GAAM+B,oBAAsB/B,GAAM8B,aAAayC,OAAS,IAAkC,IAA7BvE,GAAM+B,kBACpF/B,GAAM8B,aAAesD,EAEjBpF,GAAM+B,kBADN4D,EAC0BP,EAAUb,OAAS,EAInBqB,KAAKC,IAAI7F,GAAM+B,kBAAmBqD,EAAUb,OAAS,GAE/EvE,GAAM+B,mBAAqB,GAC3BI,GAAYnC,GAAM8B,aAAa9B,GAAM+B,mBAE7C,CACA,SAAS+D,GAAUC,GACXA,GAAS,GAAKA,EAAQ/F,GAAM8B,aAAayC,SACzCvE,GAAM+B,kBAAoBgE,EAC1B5D,GAAYnC,GAAM8B,aAAaiE,IAEvC,CACA,SAASC,KACL,IAAI5D,EAAO,GACPpC,GAAMa,GAAGc,mBACTS,GAAQ,GAAGpC,GAAMa,GAAGc,oBAAoB3B,GAAMa,GAAGe,uBAEjD5B,GAAMa,GAAGa,kBACLU,IACAA,GAAQ,MACZA,GAAQ,IAAIpC,GAAMa,GAAGa,oBAEG,mBAAjBuE,aACPA,aAAa,aAAa7D,KAG1B8C,QAAQgB,IAAI,aAAc9D,EAElC,CA+DA,OA3BA,IAAA+D,WAAU,MAdV,WACI,IACI,GAA4B,mBAAjBC,cAAsD,mBAAhBC,YAA4B,CACzE,MAAMC,EAAgBF,aAAa,CAAEG,KAAM,SAAUC,UAAWH,gBAC5DC,GAA0C,iBAAlBA,GAExBG,OAAOC,OAAO1G,GAAMa,GAAIyF,EAEhC,CACJ,CACA,MAAOrB,GACHC,QAAQC,KAAK,iDACjB,CACJ,CAEIwB,GACA7B,KAEuB,mBAAZ8B,UACPA,QAAQC,cAAcC,aAAchC,IACpC8B,QAAQC,cAAcE,gBAAiBjC,KAG3C9E,GAAMa,GAAGW,SAASjB,WAAaP,GAAMa,GAAGE,gBACxCf,GAAMa,GAAGW,SAASC,QAAUzB,GAAMa,GAAGE,mBAGzC,IAAAiG,OAAM,IAAMhH,GAAMa,GAAGE,gBAAiB4C,IAClC3D,GAAMa,GAAGW,SAASjB,WAAaoD,EAC/B3D,GAAMa,GAAGW,SAASC,QAAUkC,KAEhC,IAAAsD,aAAY,KACR,IACoC,mBAArBC,kBAA0D,mBAAhBb,aACjDa,kBAzPOC,EAyPoBnH,GAAMa,GAxPlCuG,KAAKC,MAAMD,KAAKE,UAAUH,KAwPa,CAAEZ,KAAM,SAAUC,UAAWH,eAE3E,CACA,MAAOpB,GAEP,CA9PJ,IAAmBkC,IAgQZ,CAACI,GAAMC,OACF,kBAAc,wBAAoB,MAAO,CAC7CvL,MAAO,sIACPwL,OAAO,oBAAgB,CAAEC,WAAY1H,GAAMa,GAAGI,OAAOjB,GAAMa,GAAGG,cAAcI,SAC7E,EACC,wBAAoB,YACpB,wBAAoB,MAAOpF,EAAY,EACnC,wBAAoB,MAAOE,EAAY,EACnC,wBAAoB,OAAQC,EAAY,CACpCqL,GAAO,MAAQA,GAAO,KAAM,qBAAiB,QAAS,KACtD,wBAAoB,OAAQpL,GAAY,qBAAiB4D,GAAME,MAAME,UAAY,QAAS,MAE9F,wBAAoB,OAAQ/D,EAAY,CACpCmL,GAAO,MAAQA,GAAO,KAAM,qBAAiB,MAAO,KACpD,wBAAoB,OAAQ,MAAM,qBAAiBxH,GAAME,MAAMC,MAAQ,QAAS,KAEnFH,GAAME,MAAa,UACb,kBAAc,wBAAoB,OAAQ5D,EAAY,EACrD,wBAAoB,OAAQ,MAAM,qBAAiB0F,GAAYZ,OAAQ,IACvE,wBAAoB,OAAQ5E,GAAY,qBAAiBwD,GAAME,MAAMG,SAAU,OAEjF,wBAAoB,QAAQ,GACjCL,GAAME,MAAa,UACb,kBAAc,wBAAoB,OAAQzD,EAAY,CACrD+K,GAAO,MAAQA,GAAO,KAAM,wBAAoB,OAAQ,CAAEvL,MAAO,8DAAgE,KAAM,KACvI,wBAAoB,OAAQ,CACxBA,OAAO,oBAAgB,CAAC,+CAAgDiG,GAAad,UACtF,qBAAiBpB,GAAME,MAAMI,SAAU,OAE5C,wBAAoB,QAAQ,MAEtC,wBAAoB,MAAO5D,EAAY,EACnC,wBAAoB,MAAOC,EAAa,EACpC,wBAAoB,SAAU,CAC1BV,MAAO,uGACP0L,QAASH,GAAO,KAAOA,GAAO,IAAK,mBAAgBI,GAAY5H,GAAMa,GAAGC,cAAgBd,GAAMa,GAAGC,aAAe,CAAC,WAClH,GACE,kBAAc,wBAAoB,MAAO,CACtC7E,OAAO,oBAAgB,CACnB,4CACA+D,GAAMa,GAAGC,aAAe,0BAA4B,uCAExD+G,KAAM,OACNC,QAAS,YACTC,OAAQ,gBACT,IAAKP,GAAO,MAAQA,GAAO,IAAM,EAC5B,wBAAoB,OAAQ,CACxB,iBAAkB,QAClB,kBAAmB,QACnB,eAAgB,IAChBQ,EAAG,ueACJ,MAAO,IACV,wBAAoB,OAAQ,CACxB,iBAAkB,QAClB,kBAAmB,QACnB,eAAgB,IAChBA,EAAG,oCACJ,MAAO,MACR,IACVR,GAAO,MAAQA,GAAO,KAAM,wBAAoB,OAAQ,CAAEvL,MAAO,+FAAiG,MAAO,OAE7K,wBAAoB,aACpB,iBAAa,aAAa,CAAEiH,KAAM,QAAU,CACxC+E,SAAS,aAAS,IAAM,CACnBjI,GAAMa,GAAe,eACf,kBAAc,wBAAoB,MAAOjE,EAAa,EACrD,wBAAoB,MAAOC,EAAa,EACpC,wBAAoB,MAAO,KAAM,CAC7B2K,GAAO,MAAQA,GAAO,KAAM,wBAAoB,MAAO,CAAEvL,MAAO,sGAAwG,UAAW,KACnL,wBAAoB,MAAOa,EAAa,CACpC0K,GAAO,MAAQA,GAAO,KAAM,wBAAoB,OAAQ,CAAEvL,MAAO,8BAAgC,UAAW,KAC5G,wBAAoB,QAASc,EAAa,EACtC,qBAAgB,wBAAoB,QAAS,CACzC,sBAAuByK,GAAO,KAAOA,GAAO,GAAMI,GAAa5H,GAAMa,GAAkB,gBAAI+G,GAC3FrB,KAAM,YACP,KAAM,KAAuB,CAC5B,CAAC,iBAAiBvG,GAAMa,GAAGE,mBAE/ByG,GAAO,MAAQA,GAAO,KAAM,wBAAoB,OAAQ,CAAEvL,MAAO,UAAY,MAAO,WAIhG,wBAAoB,MAAO,KAAM,CAC7BuL,GAAO,MAAQA,GAAO,KAAM,wBAAoB,MAAO,CAAEvL,MAAO,sGAAwG,UAAW,KACnL,wBAAoB,MAAOe,EAAa,GACnC,gBAAW,IAAO,wBAAoB,WAAW,MAAM,gBAAYgD,GAAMa,GAAGI,OAAQ,CAACiH,EAAO3L,MACjF,kBAAc,wBAAoB,SAAU,CAChDA,IAAKA,EACLN,OAAO,oBAAgB,CACnB,+FACA+D,GAAMa,GAAGG,eAAiBzE,EACpB,qFACA,wDAEVoL,QAAUC,GAAY5H,GAAMa,GAAGG,aAAezE,IAC/C,qBAAiB2L,EAAM/G,OAAQ,GAA6BlE,KAC/D,gBAKlB,wBAAoB,QAAQ,KAEtCkL,EAAG,WAKnB,wBAAoB,UACpB,wBAAoB,OAAQ,CACxBlM,MAAO,+CACP0L,QAASH,GAAO,KAAOA,GAAO,GAAMI,GAAY5H,GAAMa,GAAGC,cAAe,IACzE,EACC,wBAAoB,UACnBd,GAAMO,WAAWgE,OAAS,IACpB,kBAAc,wBAAoB,UAAWrH,EAAa,EACzD,wBAAoB,SAAU,CAC1BjB,MAAO,wFACP0L,QAASH,GAAO,KAAOA,GAAO,GAAMI,GAAY5H,GAAMa,GAAGW,SAASjB,YAAcP,GAAMa,GAAGW,SAASjB,aACnG,CACCiH,GAAO,MAAQA,GAAO,KAAM,wBAAoB,OAAQ,CAAEvL,MAAO,0FAA4F,EACzJ,wBAAoB,OAAQ,CAAEA,MAAO,wDACrC,qBAAiB,cACjB,MACH,kBAAc,wBAAoB,MAAO,CACtCA,OAAO,oBAAgB,CACnB,uDACA+D,GAAMa,GAAGW,SAASjB,WAAa,aAAe,KAElDsH,KAAM,OACNC,QAAS,YACTC,OAAQ,gBACT,IAAKP,GAAO,MAAQA,GAAO,IAAM,EAC5B,wBAAoB,OAAQ,CACxB,iBAAkB,QAClB,kBAAmB,QACnB,eAAgB,IAChBQ,EAAG,kBACJ,MAAO,MACR,OAEd,iBAAa,aAAa,CAAE9E,KAAM,YAAc,CAC5C+E,SAAS,aAAS,IAAM,CACnBjI,GAAMa,GAAGW,SAAmB,aACtB,kBAAc,wBAAoB,MAAOrE,EAAa,GACpD,gBAAW,IAAO,wBAAoB,WAAW,MAAM,gBAAY6C,GAAMO,WAAY,CAAC6H,EAAMrC,MACjF,kBAAc,wBAAoB,MAAO,CAC7CxJ,IAAKwJ,EACL9J,MAAO,kBACR,EACC,wBAAoB,MAAOmB,EAAa,EACpC,wBAAoB,OAAQC,GAAa,qBAAiB+K,EAAKlF,MAAO,IACtE,wBAAoB,OAAQ5F,GAAa,qBAAiB8K,EAAK7E,QAAS,MAE5E,wBAAoB,MAAOhG,EAAa,CACnC6K,EAAgB,cACV,kBAAc,wBAAoB,MAAO5K,EAAa,CACrDgK,GAAO,MAAQA,GAAO,KAAM,wBAAoB,MAAO,CAAEvL,MAAO,qEAAuE,QAAS,KAChJ,wBAAoB,MAAOwB,GAAa,qBAAiB2K,EAAK9E,aAAc,OAE9E,wBAAoB,QAAQ,IAClC,wBAAoB,MAAO5F,EAAa,EACpC,wBAAoB,MAAOC,EAAa,CACpC6J,GAAO,MAAQA,GAAO,KAAM,wBAAoB,MAAO,CAAEvL,MAAO,qEAAuE,MAAO,KAC9I,wBAAoB,MAAO2B,GAAa,qBAAiBwK,EAAK5E,UAAW,aAKzF,UAEN,wBAAoB,QAAQ,KAEtC2E,EAAG,QAGT,wBAAoB,QAAQ,IAClC,wBAAoB,cACpB,wBAAoB,UAAWtK,EAAa,EACxC,wBAAoB,SAAU,CAC1B5B,MAAO,wFACP0L,QAASH,GAAO,KAAOA,GAAO,GAAMI,GAAY5H,GAAMa,GAAGW,SAASC,SAAWzB,GAAMa,GAAGW,SAASC,UAChG,CACC+F,GAAO,MAAQA,GAAO,KAAM,wBAAoB,OAAQ,CAAEvL,MAAO,0FAA4F,EACzJ,wBAAoB,OAAQ,CAAEA,MAAO,gFACrC,qBAAiB,cACjB,MACH,kBAAc,wBAAoB,MAAO,CACtCA,OAAO,oBAAgB,CACnB,uDACA+D,GAAMa,GAAGW,SAASC,QAAU,aAAe,KAE/CoG,KAAM,OACNC,QAAS,YACTC,OAAQ,gBACT,IAAKP,GAAO,MAAQA,GAAO,IAAM,EAC5B,wBAAoB,OAAQ,CACxB,iBAAkB,QAClB,kBAAmB,QACnB,eAAgB,IAChBQ,EAAG,kBACJ,MAAO,MACR,OAEd,iBAAa,aAAa,CAAE9E,KAAM,YAAc,CAC5C+E,SAAS,aAAS,IAAM,CACnBjI,GAAMa,GAAGW,SAAgB,UACnB,kBAAc,wBAAoB,MAAO1D,EAAa,MAC1BkG,IAA1BhE,GAAMQ,OAAOyD,WACP,kBAAc,wBAAoB,MAAOlG,EAAa,EACrD,wBAAoB,MAAOC,EAAa,EACpC,wBAAoB,MAAOC,EAAa,EACpC,wBAAoB,OAAQC,GAAa,qBAAiB8B,GAAMQ,OAAOkD,eAAiB,MAAO,IAC/F,wBAAoB,OAAQvF,GAAa,qBAAiB6B,GAAMQ,OAAO2D,gBAAiB,MAE5F,wBAAoB,MAAO/F,EAAa,EACpC,wBAAoB,OAAQC,GAAa,qBAAiB2B,GAAMQ,OAAOyD,UAAY,IAAK,QACxDD,IAA/BhE,GAAMQ,OAAOuD,gBACP,kBAAc,wBAAoB,OAAQzF,EAAa,MAAO,qBAAiB0B,GAAMQ,OAAOuD,eAAiB,EAAI,IAAM,KAAM,qBAAiB/D,GAAMQ,OAAOuD,eAAiB,MAAO,KACpL,wBAAoB,QAAQ,QAG1C,wBAAoB,MAAOxF,EAAa,EACpC,wBAAoB,MAAO,CACvBtC,MAAO,oGACPwL,OAAO,oBAAgB,CAAEY,MAAOrI,GAAMQ,OAAOyD,SAAW,OACzD,KAAM,SAGf,wBAAoB,QAAQ,GACjCjE,GAAMQ,OAAOC,iBAAiB8D,OAAS,IACjC,kBAAc,wBAAoB,MAAO/F,EAAa,CACrDgJ,GAAO,MAAQA,GAAO,KAAM,wBAAoB,MAAO,CAAEvL,MAAO,iGAAmG,EAC/J,wBAAoB,MAAO,CACvBA,MAAO,cACP4L,KAAM,OACNC,QAAS,YACTC,OAAQ,gBACT,EACC,wBAAoB,OAAQ,CACxB,iBAAkB,QAClB,kBAAmB,QACnB,eAAgB,IAChBC,EAAG,4IAGX,qBAAiB,YACjB,KACJ,wBAAoB,KAAMvJ,EAAa,GAClC,gBAAW,IAAO,wBAAoB,WAAW,MAAM,gBAAYuB,GAAMQ,OAAOC,iBAAkB,CAAC6H,EAAQC,MAChG,kBAAc,wBAAoB,KAAM,CAC5ChM,IAAKgM,EACLtM,MAAO,uFACR,CACCuL,GAAO,MAAQA,GAAO,KAAM,wBAAoB,OAAQ,CAAEvL,MAAO,6BAA+B,KAAM,KACtG,wBAAoB,OAAQ,MAAM,qBAAiBqM,GAAS,OAEhE,YAGV,wBAAoB,QAAQ,OAEpC,wBAAoB,QAAQ,KAEtCH,EAAG,OAGX,wBAAoB,YACnBnI,GAAMU,MAAMC,kBAAkB4D,OAAS,GAAKvE,GAAMU,MAAME,QAAQ2D,OAAS,IACnE,kBAAc,wBAAoB,UAAW7F,EAAa,CACzD8I,GAAO,MAAQA,GAAO,KAAM,wBAAoB,KAAM,CAAEvL,MAAO,gGAAkG,EAC7J,wBAAoB,OAAQ,CAAEA,MAAO,wCACrC,qBAAiB,cACjB,KACJ,wBAAoB,MAAO0C,EAAa,GACnC,gBAAW,IAAO,wBAAoB,WAAW,MAAM,gBAAYqB,GAAMU,MAAMC,kBAAmB,CAAC6H,EAASzC,MACjG,kBAAc,wBAAoB,MAAO,CAC7CxJ,IAAKwJ,EACL9J,OAAO,oBAAgB,CAAC,2KAA4K,CAAE,oCAAqC+D,GAAMa,GAAGa,kBAAoB8G,KACxQb,QAAUC,GArV1C,SAAuBY,GACfxI,GAAMa,GAAGa,kBAAoB8G,EAC7BxI,GAAMa,GAAGa,gBAAkB,GAG3B1B,GAAMa,GAAGa,gBAAkB8G,EAE/BxC,IACJ,CA6UqD,CAAewC,IACrC,EACC,wBAAoB,OAAQ3J,EAAa,KAAM,qBAAiBkH,EAAQ,GAAI,IAC5E,wBAAoB,OAAQjH,GAAa,qBAAiB0J,GAAU,IACrE,GAAuB5J,KAC1B,SAER,wBAAoB,MAAOG,EAAa,GACnC,gBAAW,IAAO,wBAAoB,WAAW,MAAM,gBAAYiB,GAAMU,MAAME,QAAU6H,KAC9E,kBAAc,wBAAoB,SAAU,CAChDlM,IAAKkM,EAAI7D,GACT3I,OAAO,oBAAgB,CAAC,wIAAyI,CAAE,oCAAqC+D,GAAMa,GAAGc,mBAAqB8G,EAAI7D,MAC1O+C,QAAUC,GAxV1C,SAAsBa,GACdzI,GAAMa,GAAGc,mBAAqB8G,EAAI7D,IAClC5E,GAAMa,GAAGc,iBAAmB,GAC5B3B,GAAMa,GAAGe,oBAAsB,KAG/B5B,GAAMa,GAAGc,iBAAmB8G,EAAI7D,GAChC5E,GAAMa,GAAGe,oBAAsB6G,EAAItH,OAEvC6E,IACJ,CA8UqD,CAAcyC,IACpC,CACCjB,GAAO,MAAQA,GAAO,KAAM,wBAAoB,MAAO,CAAEvL,MAAO,yFAA2F,MAAO,KAClK,wBAAoB,MAAOgD,EAAa,QAAS,qBAAiBwJ,EAAI7D,IAAK,IAC3E,wBAAoB,MAAO1F,GAAa,qBAAiBuJ,EAAItH,OAAQ,IACtE,GAAuBnC,KAC1B,YAGV,wBAAoB,QAAQ,MAEtC,wBAAoB,WACnBgB,GAAM8B,aAAayC,OAAS,IACtB,kBAAc,wBAAoB,SAAUpF,EAAa,EACxD,wBAAoB,MAAOC,GAAa,EACpC,wBAAoB,SAAU,CAC1BnD,MAAO,sFACPyM,SAAU1I,GAAM+B,mBAAqB,EACrC4F,QAASH,GAAO,KAAOA,GAAO,GAAMI,GAAY9B,GAAU9F,GAAM+B,kBAAoB,KACrF,IAAKyF,GAAO,MAAQA,GAAO,IAAM,EAC5B,wBAAoB,MAAO,CACvBvL,MAAO,UACP4L,KAAM,OACNC,QAAS,YACTC,OAAQ,gBACT,EACC,wBAAoB,OAAQ,CACxB,iBAAkB,QAClB,kBAAmB,QACnB,eAAgB,IAChBC,EAAG,sBAEP,MACF,EAAe3I,KACzB,wBAAoB,MAAO,CACvBpD,MAAO,kFACP0L,QAASH,GAAO,KAAOA,GAAO,GAAMI,GAAY5H,GAAMa,GAAGgB,iBAAkB,IAC5E,EACC,wBAAoB,OAAQvC,IAAa,qBAAiBU,GAAM+B,kBAAoB,GAAK,OAAQ,qBAAiB/B,GAAM8B,aAAayC,QAAS,MAElJ,wBAAoB,SAAU,CAC1BtI,MAAO,sFACPyM,SAAU1I,GAAM+B,mBAAqB/B,GAAM8B,aAAayC,OAAS,EACjEoD,QAASH,GAAO,KAAOA,GAAO,GAAMI,GAAY9B,GAAU9F,GAAM+B,kBAAoB,KACrF,IAAKyF,GAAO,MAAQA,GAAO,IAAM,EAC5B,wBAAoB,MAAO,CACvBvL,MAAO,UACP4L,KAAM,OACNC,QAAS,YACTC,OAAQ,gBACT,EACC,wBAAoB,OAAQ,CACxB,iBAAkB,QAClB,kBAAmB,QACnB,eAAgB,IAChBC,EAAG,mBAEP,MACF,EAAezI,UAG/B,wBAAoB,QAAQ,IAClC,wBAAoB,aACpB,iBAAa,aAAa,CAAE2D,KAAM,QAAU,CACxC+E,SAAS,aAAS,IAAM,CACnBjI,GAAMa,GAAkB,kBAClB,kBAAc,wBAAoB,MAAO,CACxCtE,IAAK,EACLN,MAAO,0FACP0L,QAASH,GAAO,MAAQA,GAAO,IAAOI,GAAY5H,GAAMa,GAAGgB,iBAAkB,IAC9E,EACC,wBAAoB,MAAO,CACvB5F,MAAO,oFACP0L,QAASH,GAAO,KAAOA,GAAO,IAAK,mBAAe,OAAW,CAAC,WAC/D,EACC,wBAAoB,MAAOhI,GAAa,CACpCgI,GAAO,MAAQA,GAAO,KAAM,wBAAoB,OAAQ,CAAEvL,MAAO,8DAAgE,QAAS,KAC1I,wBAAoB,SAAU,CAC1BA,MAAO,+BACP0L,QAASH,GAAO,KAAOA,GAAO,GAAMI,GAAY5H,GAAMa,GAAGgB,iBAAkB,IAC5E,IAAK2F,GAAO,MAAQA,GAAO,IAAM,EAC5B,wBAAoB,MAAO,CACvBvL,MAAO,UACP4L,KAAM,OACNC,QAAS,YACTC,OAAQ,gBACT,EACC,wBAAoB,OAAQ,CACxB,iBAAkB,QAClB,kBAAmB,QACnB,eAAgB,IAChBC,EAAG,2BAEP,UAGhB,wBAAoB,MAAOvI,GAAa,GACnC,gBAAW,IAAO,wBAAoB,WAAW,MAAM,gBAAYO,GAAM8B,aAAc,CAAC6G,EAAO5C,MACpF,kBAAc,wBAAoB,SAAU,CAChDxJ,IAAKwJ,EACL9J,OAAO,oBAAgB,CAAC,yFACpB+D,GAAM+B,oBAAsBgE,EACtB,yDACA,qBAEV4B,QAAUC,IACN9B,GAAUC,GACV/F,GAAMa,GAAGgB,iBAAkB,IAEhC,EACC,wBAAoB,OAAQlC,GAAa,UAAW,qBAAiBoG,EAAQ,GAAI,GAChF/F,GAAM+B,oBAAsBgE,IACtB,kBAAc,wBAAoB,OAAQnG,MAC3C,wBAAoB,QAAQ,IACnC,GAAuBF,MAC1B,cAId,wBAAoB,QAAQ,KAEtCyI,EAAG,KAER,GAEX,IE9xBJS,EAAE,MACA,IAAAC,WAAUC,IAAKC,MAAM","sources":["src://tavern_helper_template/external var \"Vue\"","webpack://tavern_helper_template/./src/çŠ¶æ€æ /app.vue?21ed","webpack://tavern_helper_template/src/çŠ¶æ€æ /app.vue?4e24","src://tavern_helper_template/src/çŠ¶æ€æ /index.ts"],"sourcesContent":["const __WEBPACK_NAMESPACE_OBJECT__ = Vue;","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, withModifiers as _withModifiers, vModelCheckbox as _vModelCheckbox, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, Transition as _Transition, withCtx as _withCtx, createVNode as _createVNode, normalizeStyle as _normalizeStyle } from \"vue\";\nconst _hoisted_1 = { class: \"glass sticky top-0 z-[100] flex w-full items-center justify-between px-4 py-2 text-[8px] font-medium shadow-xl sm:text-[8px]\" };\nconst _hoisted_2 = { class: \"flex items-center gap-4\" };\nconst _hoisted_3 = { class: \"flex items-center gap-1.5 opacity-80\" };\nconst _hoisted_4 = { class: \"text-slate-300\" };\nconst _hoisted_5 = { class: \"flex items-center gap-1 font-mono tracking-wider text-pink-400\" };\nconst _hoisted_6 = {\n    key: 0,\n    class: \"flex items-center gap-1 opacity-40\"\n};\nconst _hoisted_7 = { class: \"text-slate-300\" };\nconst _hoisted_8 = {\n    key: 1,\n    class: \"flex items-center gap-1 opacity-10 transition-opacity duration-500 hover:opacity-100\"\n};\nconst _hoisted_9 = { class: \"flex items-center gap-3\" };\nconst _hoisted_10 = { class: \"relative flex items-center\" };\nconst _hoisted_11 = {\n    key: 0,\n    class: \"glass-card absolute top-full right-0 z-[200] mt-2 w-56 overflow-hidden rounded-xl border border-pink-500/30 shadow-2xl\"\n};\nconst _hoisted_12 = { class: \"space-y-5 p-4\" };\nconst _hoisted_13 = { class: \"flex items-center justify-between\" };\nconst _hoisted_14 = { class: \"switch\" };\nconst _hoisted_15 = { class: \"grid grid-cols-2 gap-2\" };\nconst _hoisted_16 = [\"onClick\"];\nconst _hoisted_17 = {\n    key: 0,\n    class: \"glass-card overflow-hidden rounded-2xl\"\n};\nconst _hoisted_18 = {\n    key: 0,\n    class: \"space-y-4 border-t border-white/10 px-4 pt-3 pb-4\"\n};\nconst _hoisted_19 = { class: \"mb-1.5 flex items-center justify-between\" };\nconst _hoisted_20 = { class: \"text-[13px] font-bold text-white/90\" };\nconst _hoisted_21 = { class: \"rounded-full bg-pink-500/10 px-2 py-0.5 text-[10px] font-medium text-pink-400\" };\nconst _hoisted_22 = { class: \"grid grid-cols-1 gap-3 rounded-xl border border-white/20 bg-black/30 p-3\" };\nconst _hoisted_23 = { key: 0 };\nconst _hoisted_24 = { class: \"text-[11px] leading-relaxed break-words whitespace-pre-wrap text-slate-300\" };\nconst _hoisted_25 = { class: \"flex justify-between border-t border-white/5 pt-2\" };\nconst _hoisted_26 = { class: \"text-left\" };\nconst _hoisted_27 = { class: \"text-[11px] leading-tight font-medium text-pink-300\" };\nconst _hoisted_28 = { class: \"glass-card overflow-hidden rounded-2xl\" };\nconst _hoisted_29 = {\n    key: 0,\n    class: \"space-y-5 border-t border-white/10 px-4 pt-3 pb-4\"\n};\nconst _hoisted_30 = { key: 0 };\nconst _hoisted_31 = { class: \"mb-2 flex items-end justify-between\" };\nconst _hoisted_32 = { class: \"flex flex-col\" };\nconst _hoisted_33 = { class: \"text-[10px] font-black tracking-tighter text-pink-500 uppercase\" };\nconst _hoisted_34 = { class: \"text-[9px] font-medium text-slate-400 opacity-90\" };\nconst _hoisted_35 = { class: \"flex items-center gap-1.5\" };\nconst _hoisted_36 = { class: \"font-mono text-xs font-bold text-pink-500\" };\nconst _hoisted_37 = {\n    key: 0,\n    class: \"font-mono text-[10px] text-slate-400\"\n};\nconst _hoisted_38 = { class: \"h-2 w-full overflow-hidden rounded-full border border-white/10 bg-black/40\" };\nconst _hoisted_39 = {\n    key: 1,\n    class: \"rounded-2xl border border-pink-500/20 bg-gradient-to-br from-pink-500/10 to-transparent p-3.5\"\n};\nconst _hoisted_40 = { class: \"space-y-1.5\" };\nconst _hoisted_41 = {\n    key: 1,\n    class: \"glass-card rounded-2xl border-white/20 p-5\"\n};\nconst _hoisted_42 = { class: \"space-y-3\" };\nconst _hoisted_43 = [\"onClick\"];\nconst _hoisted_44 = { class: \"pt-0.5 font-mono font-bold text-pink-500 opacity-60\" };\nconst _hoisted_45 = { class: \"leading-snug text-slate-200 transition-colors group-hover:text-white\" };\nconst _hoisted_46 = { class: \"mt-6 grid grid-cols-2 gap-3\" };\nconst _hoisted_47 = [\"onClick\"];\nconst _hoisted_48 = { class: \"mb-1 text-[9px] font-black tracking-widest text-pink-500 uppercase opacity-80\" };\nconst _hoisted_49 = { class: \"text-[12px] font-bold text-slate-200 group-hover:text-white\" };\nconst _hoisted_50 = {\n    key: 0,\n    class: \"w-full max-w-xl px-3 pb-2\"\n};\nconst _hoisted_51 = { class: \"glass-card flex items-center justify-between rounded-2xl p-1\" };\nconst _hoisted_52 = [\"disabled\"];\nconst _hoisted_53 = { class: \"font-mono text-[11px] font-bold text-white\" };\nconst _hoisted_54 = [\"disabled\"];\nconst _hoisted_55 = { class: \"flex items-center justify-between border-b border-white/20 p-4\" };\nconst _hoisted_56 = { class: \"space-y-1 overflow-y-auto p-2\" };\nconst _hoisted_57 = [\"onClick\"];\nconst _hoisted_58 = { class: \"font-mono text-xs text-slate-400\" };\nconst _hoisted_59 = {\n    key: 0,\n    class: \"h-1.5 w-1.5 rounded-full bg-pink-500 shadow-[0_0_8px_rgba(236,72,153,0.5)]\"\n};\nimport { computed, onMounted, reactive, watch, watchEffect } from 'vue';\nconst chatdata = `\n<Status_block>\n  æ—¶é—´: Day-3 22:15\n  åœ°ç‚¹: éœ“è™¹å¸‚ Â· åºŸå¼ƒå·¥ä¸šåŒº\n  å¤©æ°”: é˜´å¤©\n  ç†µå€¼: 2\n\nåå­—: è‰¾è‰ä¸\n        è§’è‰²ç®€è¿°: è¿™é‡Œçš„ä¹‰ä½“åŒ»ç”Ÿï¼Œæ€§æ ¼å†·æ·¡ä½†åŒ»æœ¯é«˜è¶…ã€‚\n        çŠ¶æ€: è­¦æˆ’ / ä¹‰ä½“è¿‡çƒ­\n        å¯¹ä½ çš„æ€åº¦: ä¿¡ä»»ä½†å……æ»¡ç–‘è™‘\nåå­—: ç”±è‰\n        è§’è‰²ç®€è¿°: æ´»æ³¼çš„å‘å¯¼ï¼Œå¯¹è¿™ç‰‡åŒºåŸŸéå¸¸ç†Ÿæ‚‰ã€‚\n        çŠ¶æ€: æ‹…å¿§\n        å¯¹ä½ çš„æ€åº¦: ä¾èµ–\n\n         å •è½å€¼: 45\n         è¿›åº¦: å¼€å§‹å •è½ï¼Œè¿›å…¥å •è½ä¸­æœŸ\n         é‡è¦äº‹é¡¹: åŒºåŸŸå†…çš„ç”µç£å¹²æ‰°æ­£åœ¨åŠ å¼º / è¡¥ç»™å“å³å°†è€—å°½\n\n         å¯èƒ½çš„å‘å±•:\n          - æˆåŠŸçªç ´å°é”çº¿\n          - é™·å…¥æ— å°½çš„å··æˆ˜\n          - è¢«èµ¶æ¥çš„æ•Œäººå›´å›°\n      é€‰é¡¹:\n      - A. [å¼ºæ”»] é›†ä¸­ç«åŠ›æ”»å‡»æ­£é—¨ã€‚\n      - B. [æ½œå…¥] å¯»æ‰¾é€šé£ç®¡é“ç»•è¿‡å®ˆå«ã€‚\n      - C. [xx] é€‰é¡¹C\n      - D. [xx] é€‰é¡¹D\n</Status_block>\n`;\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'app',\n    setup(__props) {\n        function deepClone(obj) {\n            return JSON.parse(JSON.stringify(obj));\n        }\n        const state = reactive({\n            world: { time: '', location: '', weather: '', entropy: '' },\n            characters: [],\n            system: { importantMatters: [] },\n            story: { potentialOutcomes: [], options: [] },\n            ui: {\n                settingsOpen: false,\n                defaultExpanded: false,\n                currentTheme: 'midnight',\n                themes: {\n                    midnight: { label: 'åˆå¤œéœ“è™¹', value: 'linear-gradient(135deg, #0f172a 0%, #1e293b 100%)' },\n                    abyss: { label: 'æ·±æ¸Šä¹‹åº•', value: 'linear-gradient(135deg, #020617 0%, #1e293b 100%)' },\n                    cyber: { label: 'èµ›åšçŸ©é˜µ', value: 'linear-gradient(135deg, #001a1a 0%, #003333 100%)' },\n                    wild: { label: 'æš®è‰²è’é‡', value: 'linear-gradient(135deg, #1a0f0f 0%, #3b1e1e 100%)' },\n                },\n                expanded: {\n                    characters: true,\n                    matters: true,\n                },\n                selectedOutcome: '',\n                selectedOptionId: '',\n                selectedOptionLabel: '',\n                floorPickerOpen: false,\n            },\n            statusFloors: [],\n            currentFloorIndex: -1,\n        });\n        const weatherIcon = computed(() => {\n            const icons = {\n                æ™´æœ—: 'â˜€ï¸',\n                å¤šäº‘: 'â˜ï¸',\n                é˜´å¤©: 'ğŸŒ¥ï¸',\n                å°é›¨: 'ğŸŒ§ï¸',\n                æš´é›¨: 'â›ˆï¸',\n                é›ªå¤©: 'â„ï¸',\n            };\n            return icons[state.world.weather] || 'ğŸŒ¡ï¸';\n        });\n        const entropyColor = computed(() => {\n            const colors = {\n                '1': 'text-blue-400',\n                '2': 'text-green-400',\n                '3': 'text-yellow-400',\n                '4': 'text-orange-400',\n                '5': 'text-red-500',\n            };\n            return colors[state.world.entropy] || 'text-slate-400';\n        });\n        function parseStatus(text) {\n            const blockMatch = text.match(/<Status_block>([\\s\\S]*?)<\\/Status_block>/);\n            if (!blockMatch)\n                return;\n            const content = blockMatch[1];\n            // Parse World\n            const timeMatch = content.match(/æ—¶é—´:\\s*(.*)/);\n            if (timeMatch)\n                state.world.time = timeMatch[1].trim();\n            const locationMatch = content.match(/åœ°ç‚¹:\\s*(.*)/);\n            if (locationMatch)\n                state.world.location = locationMatch[1].trim();\n            const weatherMatch = content.match(/å¤©æ°”:\\s*(.*)/);\n            if (weatherMatch)\n                state.world.weather = weatherMatch[1].trim();\n            const entropyMatch = content.match(/ç†µå€¼:\\s*(.*)/);\n            if (entropyMatch)\n                state.world.entropy = entropyMatch[1].trim();\n            // Parse Characters\n            const charBlocks = content.split(/åå­—:/).slice(1);\n            state.characters = charBlocks.map(block => {\n                const lines = block.split('\\n');\n                const name = lines[0].trim();\n                const descMatch = block.match(/è§’è‰²ç®€è¿°:\\s*(.*)/);\n                const statusMatch = block.match(/çŠ¶æ€:\\s*(.*)/);\n                const attitudeMatch = block.match(/å¯¹.*çš„æ€åº¦:\\s*(.*)/);\n                return {\n                    name,\n                    description: descMatch ? descMatch[1].trim() : '',\n                    status: statusMatch ? statusMatch[1].trim() : '',\n                    attitude: attitudeMatch ? attitudeMatch[1].trim() : '',\n                };\n            });\n            // Parse System\n            // åŒ¹é…ç³»ç»Ÿå€¼æ—¶è¦å‰”é™¤ç†µå€¼ï¼Œä½¿ç”¨æ’é™¤å­—ç¬¦é›†ç¡®ä¿ä¸åŒ¹é…åŒ…å«â€œç†µâ€çš„è¯\n            const progressValMatch = content.match(/([^\\sç†µ]{1,4}å€¼)\\s*[:ï¼š]\\s*(\\d+)/);\n            if (progressValMatch) {\n                state.system.progressLabel = progressValMatch[1].trim();\n                const newVal = parseInt(progressValMatch[2]);\n                // è®¡ç®—å˜åŠ¨é‡\n                if (state.currentFloorIndex > 0) {\n                    const prevContent = state.statusFloors[state.currentFloorIndex - 1];\n                    const prevMatch = prevContent.match(new RegExp(`(${state.system.progressLabel})\\\\s*[:ï¼š]\\\\s*(\\\\d+)`));\n                    if (prevMatch) {\n                        state.system.progressDelta = newVal - parseInt(prevMatch[1]);\n                    }\n                    else {\n                        state.system.progressDelta = undefined;\n                    }\n                }\n                else {\n                    state.system.progressDelta = undefined;\n                }\n                state.system.progress = newVal;\n            }\n            const progressStatusMatch = content.match(/è¿›åº¦:\\s*(.*)/);\n            if (progressStatusMatch)\n                state.system.progressStatus = progressStatusMatch[1].trim();\n            const importantMatch = content.match(/é‡è¦äº‹é¡¹:\\s*(.*)/);\n            if (importantMatch) {\n                state.system.importantMatters = importantMatch[1]\n                    .split('/')\n                    .map(item => item.trim())\n                    .filter(item => item.length > 0);\n            }\n            // Parse Story\n            const outcomesMatch = content.match(/å¯èƒ½çš„å‘å±•:([\\s\\S]*?)(?=é€‰é¡¹|$)/);\n            if (outcomesMatch) {\n                state.story.potentialOutcomes = outcomesMatch[1]\n                    .split('\\n')\n                    .map(l => l.match(/-\\s*(.*)/)?.[1]?.trim())\n                    .filter((l) => !!l);\n            }\n            const optionsMatch = content.match(/é€‰é¡¹:([\\s\\S]*?)$/);\n            if (optionsMatch) {\n                state.story.options = optionsMatch[1]\n                    .split('\\n')\n                    .map(l => {\n                    const m = l.match(/-\\s*([A-Z])\\.\\s*(.*)/);\n                    if (m)\n                        return { id: m[1], label: m[2].trim() };\n                    return null;\n                })\n                    .filter((o) => !!o);\n            }\n        }\n        function updateData() {\n            let messages = [];\n            try {\n                if (typeof getChatMessages === 'function') {\n                    messages = getChatMessages('0-{{lastMessageId}}');\n                }\n            }\n            catch (e) {\n                console.warn('Failed to get chat messages, using default data.');\n            }\n            const newFloors = [];\n            if (Array.isArray(messages)) {\n                messages.forEach(m => {\n                    if (m?.message?.includes('<Status_block>')) {\n                        newFloors.push(m.message);\n                    }\n                });\n            }\n            if (newFloors.length === 0) {\n                newFloors.push(chatdata);\n            }\n            const isAtLast = state.currentFloorIndex === state.statusFloors.length - 1 || state.currentFloorIndex === -1;\n            state.statusFloors = newFloors;\n            if (isAtLast) {\n                state.currentFloorIndex = newFloors.length - 1;\n            }\n            else {\n                // ä¿æŒå½“å‰ç´¢å¼•ï¼Œä½†ç¡®ä¿ä¸è¶Šç•Œ\n                state.currentFloorIndex = Math.min(state.currentFloorIndex, newFloors.length - 1);\n            }\n            if (state.currentFloorIndex >= 0) {\n                parseStatus(state.statusFloors[state.currentFloorIndex]);\n            }\n        }\n        function goToFloor(index) {\n            if (index >= 0 && index < state.statusFloors.length) {\n                state.currentFloorIndex = index;\n                parseStatus(state.statusFloors[index]);\n            }\n        }\n        function updateInputBox() {\n            let text = '';\n            if (state.ui.selectedOptionId) {\n                text += `${state.ui.selectedOptionId}.${state.ui.selectedOptionLabel}`;\n            }\n            if (state.ui.selectedOutcome) {\n                if (text)\n                    text += '\\n';\n                text += `ï¼ˆ${state.ui.selectedOutcome}ï¼‰`;\n            }\n            if (typeof triggerSlash === 'function') {\n                triggerSlash(`/setinput ${text}`);\n            }\n            else {\n                console.log('Set input:', text);\n            }\n        }\n        function selectOutcome(outcome) {\n            if (state.ui.selectedOutcome === outcome) {\n                state.ui.selectedOutcome = '';\n            }\n            else {\n                state.ui.selectedOutcome = outcome;\n            }\n            updateInputBox();\n        }\n        function selectOption(opt) {\n            if (state.ui.selectedOptionId === opt.id) {\n                state.ui.selectedOptionId = '';\n                state.ui.selectedOptionLabel = '';\n            }\n            else {\n                state.ui.selectedOptionId = opt.id;\n                state.ui.selectedOptionLabel = opt.label;\n            }\n            updateInputBox();\n        }\n        // æŒä¹…åŒ–è®¾ç½®åŠ è½½\n        function loadSettings() {\n            try {\n                if (typeof getVariables === 'function' && typeof getScriptId === 'function') {\n                    const savedSettings = getVariables({ type: 'script', script_id: getScriptId() });\n                    if (savedSettings && typeof savedSettings === 'object') {\n                        // æ·±åº¦åˆå¹¶ï¼Œé˜²æ­¢è¦†ç›–æ•´ä¸ª ui å¯¹è±¡\n                        Object.assign(state.ui, savedSettings);\n                    }\n                }\n            }\n            catch (e) {\n                console.warn('Failed to load settings from tavern variables.');\n            }\n        }\n        onMounted(() => {\n            loadSettings();\n            updateData();\n            // ç›‘å¬æ¶ˆæ¯å˜åŒ–\n            if (typeof eventOn === 'function') {\n                eventOn(tavern_events.CHAT_CHANGED, updateData);\n                eventOn(tavern_events.MESSAGE_UPDATED, updateData);\n            }\n            // åˆå§‹åŒ–å±•å¼€çŠ¶æ€ï¼šä»…å½“æ²¡æœ‰æ‰‹åŠ¨æ“ä½œè¿‡æ—¶æ‰åº”ç”¨é»˜è®¤å€¼\n            state.ui.expanded.characters = state.ui.defaultExpanded;\n            state.ui.expanded.matters = state.ui.defaultExpanded;\n        });\n        // ç›‘å¬é»˜è®¤å±•å¼€è®¾ç½®çš„å˜åŒ–ï¼Œå®æ—¶åº”ç”¨\n        watch(() => state.ui.defaultExpanded, newVal => {\n            state.ui.expanded.characters = newVal;\n            state.ui.expanded.matters = newVal;\n        });\n        watchEffect(() => {\n            try {\n                if (typeof replaceVariables === 'function' && typeof getScriptId === 'function') {\n                    replaceVariables(deepClone(state.ui), { type: 'script', script_id: getScriptId() });\n                }\n            }\n            catch (e) {\n                // Ignore error in non-tavern environment\n            }\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n                class: \"relative mx-auto flex w-fit max-w-[100vw] flex-col items-center overflow-hidden rounded-3xl transition-all duration-700 sm:max-w-xl\",\n                style: _normalizeStyle({ background: state.ui.themes[state.ui.currentTheme].value })\n            }, [\n                _createCommentVNode(\" é¡¶éƒ¨çŠ¶æ€æ  \"),\n                _createElementVNode(\"nav\", _hoisted_1, [\n                    _createElementVNode(\"div\", _hoisted_2, [\n                        _createElementVNode(\"span\", _hoisted_3, [\n                            _cache[11] || (_cache[11] = _createTextVNode(\"ğŸ—ºï¸ \", -1 /* CACHED */)),\n                            _createElementVNode(\"span\", _hoisted_4, _toDisplayString(state.world.location || 'æœªçŸ¥åœ°ç‚¹'), 1 /* TEXT */)\n                        ]),\n                        _createElementVNode(\"span\", _hoisted_5, [\n                            _cache[12] || (_cache[12] = _createTextVNode(\"â° \", -1 /* CACHED */)),\n                            _createElementVNode(\"span\", null, _toDisplayString(state.world.time || 'æœªçŸ¥æ—¶é—´'), 1 /* TEXT */)\n                        ]),\n                        (state.world.weather)\n                            ? (_openBlock(), _createElementBlock(\"span\", _hoisted_6, [\n                                _createElementVNode(\"span\", null, _toDisplayString(weatherIcon.value), 1 /* TEXT */),\n                                _createElementVNode(\"span\", _hoisted_7, _toDisplayString(state.world.weather), 1 /* TEXT */)\n                            ]))\n                            : _createCommentVNode(\"v-if\", true),\n                        (state.world.entropy)\n                            ? (_openBlock(), _createElementBlock(\"span\", _hoisted_8, [\n                                _cache[13] || (_cache[13] = _createElementVNode(\"span\", { class: \"text-[7px] leading-none font-bold text-slate-500 uppercase\" }, \"ç†µ\", -1 /* CACHED */)),\n                                _createElementVNode(\"span\", {\n                                    class: _normalizeClass(['font-mono text-[8px] leading-none font-black', entropyColor.value])\n                                }, _toDisplayString(state.world.entropy), 3 /* TEXT, CLASS */)\n                            ]))\n                            : _createCommentVNode(\"v-if\", true)\n                    ]),\n                    _createElementVNode(\"div\", _hoisted_9, [\n                        _createElementVNode(\"div\", _hoisted_10, [\n                            _createElementVNode(\"button\", {\n                                class: \"group flex items-center gap-1.5 rounded-lg p-1.5 transition-all hover:bg-white/10 focus:outline-none\",\n                                onClick: _cache[0] || (_cache[0] = _withModifiers(($event) => (state.ui.settingsOpen = !state.ui.settingsOpen), [\"stop\"]))\n                            }, [\n                                (_openBlock(), _createElementBlock(\"svg\", {\n                                    class: _normalizeClass([\n                                        'h-4 w-4 transition-transform duration-700',\n                                        state.ui.settingsOpen ? 'rotate-90 text-pink-500' : 'opacity-70 group-hover:opacity-100',\n                                    ]),\n                                    fill: \"none\",\n                                    viewBox: \"0 0 24 24\",\n                                    stroke: \"currentColor\"\n                                }, [...(_cache[14] || (_cache[14] = [\n                                        _createElementVNode(\"path\", {\n                                            \"stroke-linecap\": \"round\",\n                                            \"stroke-linejoin\": \"round\",\n                                            \"stroke-width\": \"2\",\n                                            d: \"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z\"\n                                        }, null, -1 /* CACHED */),\n                                        _createElementVNode(\"path\", {\n                                            \"stroke-linecap\": \"round\",\n                                            \"stroke-linejoin\": \"round\",\n                                            \"stroke-width\": \"2\",\n                                            d: \"M15 12a3 3 0 11-6 0 3 3 0 016 0z\"\n                                        }, null, -1 /* CACHED */)\n                                    ]))], 2 /* CLASS */)),\n                                _cache[15] || (_cache[15] = _createElementVNode(\"span\", { class: \"text-[9px] tracking-tighter uppercase opacity-40 transition-opacity group-hover:opacity-100\" }, \"è®¾ç½®\", -1 /* CACHED */))\n                            ]),\n                            _createCommentVNode(\" è®¾ç½®ä¸‹æ‹‰èœå• \"),\n                            _createVNode(_Transition, { name: \"fade\" }, {\n                                default: _withCtx(() => [\n                                    (state.ui.settingsOpen)\n                                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_11, [\n                                            _createElementVNode(\"div\", _hoisted_12, [\n                                                _createElementVNode(\"div\", null, [\n                                                    _cache[18] || (_cache[18] = _createElementVNode(\"div\", { class: \"mb-3 border-b border-white/20 pb-1 text-[9px] font-bold tracking-widest text-pink-500/60 uppercase\" }, \" é¢„è®¾åå¥½ \", -1 /* CACHED */)),\n                                                    _createElementVNode(\"div\", _hoisted_13, [\n                                                        _cache[17] || (_cache[17] = _createElementVNode(\"span\", { class: \"text-[10px] text-slate-300\" }, \"é¢æ¿é»˜è®¤å±•å¼€\", -1 /* CACHED */)),\n                                                        _createElementVNode(\"label\", _hoisted_14, [\n                                                            _withDirectives(_createElementVNode(\"input\", {\n                                                                \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event) => ((state.ui.defaultExpanded) = $event)),\n                                                                type: \"checkbox\"\n                                                            }, null, 512 /* NEED_PATCH */), [\n                                                                [_vModelCheckbox, state.ui.defaultExpanded]\n                                                            ]),\n                                                            _cache[16] || (_cache[16] = _createElementVNode(\"span\", { class: \"slider\" }, null, -1 /* CACHED */))\n                                                        ])\n                                                    ])\n                                                ]),\n                                                _createElementVNode(\"div\", null, [\n                                                    _cache[19] || (_cache[19] = _createElementVNode(\"div\", { class: \"mb-3 border-b border-white/20 pb-1 text-[9px] font-bold tracking-widest text-pink-500/60 uppercase\" }, \" è§†è§‰ç¯å¢ƒ \", -1 /* CACHED */)),\n                                                    _createElementVNode(\"div\", _hoisted_15, [\n                                                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(state.ui.themes, (theme, key) => {\n                                                            return (_openBlock(), _createElementBlock(\"button\", {\n                                                                key: key,\n                                                                class: _normalizeClass([\n                                                                    'flex h-8 items-center justify-center rounded-lg border text-[9px] font-medium transition-all',\n                                                                    state.ui.currentTheme === key\n                                                                        ? 'border-pink-500 bg-pink-500/20 text-pink-300 shadow-[0_0_8px_rgba(236,72,153,0.2)]'\n                                                                        : 'border-white/20 text-white/60 hover:border-white/30',\n                                                                ]),\n                                                                onClick: ($event) => (state.ui.currentTheme = key)\n                                                            }, _toDisplayString(theme.label), 11 /* TEXT, CLASS, PROPS */, _hoisted_16));\n                                                        }), 128 /* KEYED_FRAGMENT */))\n                                                    ])\n                                                ])\n                                            ])\n                                        ]))\n                                        : _createCommentVNode(\"v-if\", true)\n                                ]),\n                                _: 1 /* STABLE */\n                            })\n                        ])\n                    ])\n                ]),\n                _createCommentVNode(\" ä¸»å®¹å™¨ \"),\n                _createElementVNode(\"main\", {\n                    class: \"flex w-full max-w-xl flex-col gap-4 p-3 pt-4\",\n                    onClick: _cache[4] || (_cache[4] = ($event) => (state.ui.settingsOpen = false))\n                }, [\n                    _createCommentVNode(\" è§’è‰²é¢æ¿ \"),\n                    (state.characters.length > 0)\n                        ? (_openBlock(), _createElementBlock(\"section\", _hoisted_17, [\n                            _createElementVNode(\"button\", {\n                                class: \"flex w-full items-center justify-between px-4 py-3 transition-colors hover:bg-white/5\",\n                                onClick: _cache[2] || (_cache[2] = ($event) => (state.ui.expanded.characters = !state.ui.expanded.characters))\n                            }, [\n                                _cache[21] || (_cache[21] = _createElementVNode(\"span\", { class: \"flex items-center gap-2 text-[11px] font-bold tracking-widest text-slate-300 uppercase\" }, [\n                                    _createElementVNode(\"span\", { class: \"h-1.5 w-1.5 animate-pulse rounded-full bg-pink-500\" }),\n                                    _createTextVNode(\" è§’è‰²çŠ¶æ€ç›‘æ§ \")\n                                ], -1 /* CACHED */)),\n                                (_openBlock(), _createElementBlock(\"svg\", {\n                                    class: _normalizeClass([\n                                        'h-4 w-4 opacity-40 transition-transform duration-300',\n                                        state.ui.expanded.characters ? 'rotate-180' : '',\n                                    ]),\n                                    fill: \"none\",\n                                    viewBox: \"0 0 24 24\",\n                                    stroke: \"currentColor\"\n                                }, [...(_cache[20] || (_cache[20] = [\n                                        _createElementVNode(\"path\", {\n                                            \"stroke-linecap\": \"round\",\n                                            \"stroke-linejoin\": \"round\",\n                                            \"stroke-width\": \"2\",\n                                            d: \"M19 9l-7 7-7-7\"\n                                        }, null, -1 /* CACHED */)\n                                    ]))], 2 /* CLASS */))\n                            ]),\n                            _createVNode(_Transition, { name: \"collapse\" }, {\n                                default: _withCtx(() => [\n                                    (state.ui.expanded.characters)\n                                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_18, [\n                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(state.characters, (char, index) => {\n                                                return (_openBlock(), _createElementBlock(\"div\", {\n                                                    key: index,\n                                                    class: \"group relative\"\n                                                }, [\n                                                    _createElementVNode(\"div\", _hoisted_19, [\n                                                        _createElementVNode(\"span\", _hoisted_20, _toDisplayString(char.name), 1 /* TEXT */),\n                                                        _createElementVNode(\"span\", _hoisted_21, _toDisplayString(char.status), 1 /* TEXT */)\n                                                    ]),\n                                                    _createElementVNode(\"div\", _hoisted_22, [\n                                                        (char.description)\n                                                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_23, [\n                                                                _cache[22] || (_cache[22] = _createElementVNode(\"div\", { class: \"mb-1 text-[8px] font-bold tracking-wider text-slate-500 uppercase\" }, \"è§’è‰²ç®€è¿°\", -1 /* CACHED */)),\n                                                                _createElementVNode(\"div\", _hoisted_24, _toDisplayString(char.description), 1 /* TEXT */)\n                                                            ]))\n                                                            : _createCommentVNode(\"v-if\", true),\n                                                        _createElementVNode(\"div\", _hoisted_25, [\n                                                            _createElementVNode(\"div\", _hoisted_26, [\n                                                                _cache[23] || (_cache[23] = _createElementVNode(\"div\", { class: \"mb-1 text-[8px] font-bold tracking-wider text-slate-500 uppercase\" }, \"æ€åº¦\", -1 /* CACHED */)),\n                                                                _createElementVNode(\"div\", _hoisted_27, _toDisplayString(char.attitude), 1 /* TEXT */)\n                                                            ])\n                                                        ])\n                                                    ])\n                                                ]));\n                                            }), 128 /* KEYED_FRAGMENT */))\n                                        ]))\n                                        : _createCommentVNode(\"v-if\", true)\n                                ]),\n                                _: 1 /* STABLE */\n                            })\n                        ]))\n                        : _createCommentVNode(\"v-if\", true),\n                    _createCommentVNode(\" ç³»ç»Ÿä¸äº‹é¡¹é¢æ¿ \"),\n                    _createElementVNode(\"section\", _hoisted_28, [\n                        _createElementVNode(\"button\", {\n                            class: \"flex w-full items-center justify-between px-4 py-3 transition-colors hover:bg-white/5\",\n                            onClick: _cache[3] || (_cache[3] = ($event) => (state.ui.expanded.matters = !state.ui.expanded.matters))\n                        }, [\n                            _cache[25] || (_cache[25] = _createElementVNode(\"span\", { class: \"flex items-center gap-2 text-[11px] font-bold tracking-widest text-slate-300 uppercase\" }, [\n                                _createElementVNode(\"span\", { class: \"h-1.5 w-1.5 rounded-full bg-blue-500 shadow-[0_0_8px_rgba(59,130,246,0.5)]\" }),\n                                _createTextVNode(\" äº‹ä»¶è„‰ç»œè®°å½• \")\n                            ], -1 /* CACHED */)),\n                            (_openBlock(), _createElementBlock(\"svg\", {\n                                class: _normalizeClass([\n                                    'h-4 w-4 opacity-40 transition-transform duration-300',\n                                    state.ui.expanded.matters ? 'rotate-180' : '',\n                                ]),\n                                fill: \"none\",\n                                viewBox: \"0 0 24 24\",\n                                stroke: \"currentColor\"\n                            }, [...(_cache[24] || (_cache[24] = [\n                                    _createElementVNode(\"path\", {\n                                        \"stroke-linecap\": \"round\",\n                                        \"stroke-linejoin\": \"round\",\n                                        \"stroke-width\": \"2\",\n                                        d: \"M19 9l-7 7-7-7\"\n                                    }, null, -1 /* CACHED */)\n                                ]))], 2 /* CLASS */))\n                        ]),\n                        _createVNode(_Transition, { name: \"collapse\" }, {\n                            default: _withCtx(() => [\n                                (state.ui.expanded.matters)\n                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_29, [\n                                        (state.system.progress !== undefined)\n                                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_30, [\n                                                _createElementVNode(\"div\", _hoisted_31, [\n                                                    _createElementVNode(\"div\", _hoisted_32, [\n                                                        _createElementVNode(\"span\", _hoisted_33, _toDisplayString(state.system.progressLabel || 'è¿›åº¦'), 1 /* TEXT */),\n                                                        _createElementVNode(\"span\", _hoisted_34, _toDisplayString(state.system.progressStatus), 1 /* TEXT */)\n                                                    ]),\n                                                    _createElementVNode(\"div\", _hoisted_35, [\n                                                        _createElementVNode(\"span\", _hoisted_36, _toDisplayString(state.system.progress) + \"%\", 1 /* TEXT */),\n                                                        (state.system.progressDelta !== undefined)\n                                                            ? (_openBlock(), _createElementBlock(\"span\", _hoisted_37, \" (\" + _toDisplayString(state.system.progressDelta >= 0 ? '+' : '') + _toDisplayString(state.system.progressDelta) + \"%) \", 1 /* TEXT */))\n                                                            : _createCommentVNode(\"v-if\", true)\n                                                    ])\n                                                ]),\n                                                _createElementVNode(\"div\", _hoisted_38, [\n                                                    _createElementVNode(\"div\", {\n                                                        class: \"pink-glow h-full bg-gradient-to-r from-pink-600 to-pink-400 transition-all duration-1000 ease-out\",\n                                                        style: _normalizeStyle({ width: state.system.progress + '%' })\n                                                    }, null, 4 /* STYLE */)\n                                                ])\n                                            ]))\n                                            : _createCommentVNode(\"v-if\", true),\n                                        (state.system.importantMatters.length > 0)\n                                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_39, [\n                                                _cache[27] || (_cache[27] = _createElementVNode(\"div\", { class: \"mb-2 flex items-center gap-1.5 text-[10px] font-black tracking-widest text-pink-400 uppercase\" }, [\n                                                    _createElementVNode(\"svg\", {\n                                                        class: \"h-3.5 w-3.5\",\n                                                        fill: \"none\",\n                                                        viewBox: \"0 0 24 24\",\n                                                        stroke: \"currentColor\"\n                                                    }, [\n                                                        _createElementVNode(\"path\", {\n                                                            \"stroke-linecap\": \"round\",\n                                                            \"stroke-linejoin\": \"round\",\n                                                            \"stroke-width\": \"2\",\n                                                            d: \"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\"\n                                                        })\n                                                    ]),\n                                                    _createTextVNode(\" é‡è¦äº‹é¡¹ \")\n                                                ], -1 /* CACHED */)),\n                                                _createElementVNode(\"ul\", _hoisted_40, [\n                                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(state.system.importantMatters, (matter, idx) => {\n                                                        return (_openBlock(), _createElementBlock(\"li\", {\n                                                            key: idx,\n                                                            class: \"flex items-start gap-2 text-[12px] leading-relaxed text-slate-200 italic opacity-90\"\n                                                        }, [\n                                                            _cache[26] || (_cache[26] = _createElementVNode(\"span\", { class: \"shrink-0 text-pink-500/60\" }, \"Â·\", -1 /* CACHED */)),\n                                                            _createElementVNode(\"span\", null, _toDisplayString(matter), 1 /* TEXT */)\n                                                        ]));\n                                                    }), 128 /* KEYED_FRAGMENT */))\n                                                ])\n                                            ]))\n                                            : _createCommentVNode(\"v-if\", true)\n                                    ]))\n                                    : _createCommentVNode(\"v-if\", true)\n                            ]),\n                            _: 1 /* STABLE */\n                        })\n                    ]),\n                    _createCommentVNode(\" å‰§æƒ…èµ°å‘é¢æ¿ \"),\n                    (state.story.potentialOutcomes.length > 0 || state.story.options.length > 0)\n                        ? (_openBlock(), _createElementBlock(\"section\", _hoisted_41, [\n                            _cache[29] || (_cache[29] = _createElementVNode(\"h2\", { class: \"mb-5 flex items-center gap-2 text-[11px] font-black tracking-[0.3em] text-pink-500 uppercase\" }, [\n                                _createElementVNode(\"span\", { class: \"h-3.5 w-1 rounded-full bg-pink-500\" }),\n                                _createTextVNode(\" å‰§æƒ…å³æ—¶èµ°å‘ \")\n                            ], -1 /* CACHED */)),\n                            _createElementVNode(\"div\", _hoisted_42, [\n                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(state.story.potentialOutcomes, (outcome, index) => {\n                                    return (_openBlock(), _createElementBlock(\"div\", {\n                                        key: index,\n                                        class: _normalizeClass([\"group flex cursor-pointer items-start gap-3 rounded-xl border border-white/20 bg-white/5 px-4 py-3 text-[12px] transition-all hover:border-pink-500/40 hover:bg-white/10\", { 'border-pink-500/60 bg-pink-500/10': state.ui.selectedOutcome === outcome }]),\n                                        onClick: ($event) => (selectOutcome(outcome))\n                                    }, [\n                                        _createElementVNode(\"span\", _hoisted_44, \"0\" + _toDisplayString(index + 1), 1 /* TEXT */),\n                                        _createElementVNode(\"span\", _hoisted_45, _toDisplayString(outcome), 1 /* TEXT */)\n                                    ], 10 /* CLASS, PROPS */, _hoisted_43));\n                                }), 128 /* KEYED_FRAGMENT */))\n                            ]),\n                            _createElementVNode(\"div\", _hoisted_46, [\n                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(state.story.options, (opt) => {\n                                    return (_openBlock(), _createElementBlock(\"button\", {\n                                        key: opt.id,\n                                        class: _normalizeClass([\"glass-card group relative overflow-hidden rounded-2xl p-4 text-left hover:border-pink-500/40 hover:bg-pink-500/10 active:scale-[0.98]\", { 'border-pink-500/60 bg-pink-500/20': state.ui.selectedOptionId === opt.id }]),\n                                        onClick: ($event) => (selectOption(opt))\n                                    }, [\n                                        _cache[28] || (_cache[28] = _createElementVNode(\"div\", { class: \"absolute top-0 right-0 h-12 w-12 translate-x-6 -translate-y-6 rotate-45 bg-pink-500/5\" }, null, -1 /* CACHED */)),\n                                        _createElementVNode(\"div\", _hoisted_48, \" æŒ‡ä»¤ \" + _toDisplayString(opt.id), 1 /* TEXT */),\n                                        _createElementVNode(\"div\", _hoisted_49, _toDisplayString(opt.label), 1 /* TEXT */)\n                                    ], 10 /* CLASS, PROPS */, _hoisted_47));\n                                }), 128 /* KEYED_FRAGMENT */))\n                            ])\n                        ]))\n                        : _createCommentVNode(\"v-if\", true)\n                ]),\n                _createCommentVNode(\" åº•éƒ¨å¯¼èˆªæ  \"),\n                (state.statusFloors.length > 1)\n                    ? (_openBlock(), _createElementBlock(\"footer\", _hoisted_50, [\n                        _createElementVNode(\"div\", _hoisted_51, [\n                            _createElementVNode(\"button\", {\n                                class: \"rounded-xl p-1.5 text-white transition-colors hover:bg-white/10 disabled:opacity-20\",\n                                disabled: state.currentFloorIndex <= 0,\n                                onClick: _cache[5] || (_cache[5] = ($event) => (goToFloor(state.currentFloorIndex - 1)))\n                            }, [...(_cache[30] || (_cache[30] = [\n                                    _createElementVNode(\"svg\", {\n                                        class: \"h-4 w-4\",\n                                        fill: \"none\",\n                                        viewBox: \"0 0 24 24\",\n                                        stroke: \"currentColor\"\n                                    }, [\n                                        _createElementVNode(\"path\", {\n                                            \"stroke-linecap\": \"round\",\n                                            \"stroke-linejoin\": \"round\",\n                                            \"stroke-width\": \"2\",\n                                            d: \"M15 19l-7-7 7-7\"\n                                        })\n                                    ], -1 /* CACHED */)\n                                ]))], 8 /* PROPS */, _hoisted_52),\n                            _createElementVNode(\"div\", {\n                                class: \"flex cursor-pointer flex-col items-center transition-colors hover:text-pink-400\",\n                                onClick: _cache[6] || (_cache[6] = ($event) => (state.ui.floorPickerOpen = true))\n                            }, [\n                                _createElementVNode(\"span\", _hoisted_53, _toDisplayString(state.currentFloorIndex + 1) + \" / \" + _toDisplayString(state.statusFloors.length), 1 /* TEXT */)\n                            ]),\n                            _createElementVNode(\"button\", {\n                                class: \"rounded-xl p-1.5 text-white transition-colors hover:bg-white/10 disabled:opacity-20\",\n                                disabled: state.currentFloorIndex >= state.statusFloors.length - 1,\n                                onClick: _cache[7] || (_cache[7] = ($event) => (goToFloor(state.currentFloorIndex + 1)))\n                            }, [...(_cache[31] || (_cache[31] = [\n                                    _createElementVNode(\"svg\", {\n                                        class: \"h-4 w-4\",\n                                        fill: \"none\",\n                                        viewBox: \"0 0 24 24\",\n                                        stroke: \"currentColor\"\n                                    }, [\n                                        _createElementVNode(\"path\", {\n                                            \"stroke-linecap\": \"round\",\n                                            \"stroke-linejoin\": \"round\",\n                                            \"stroke-width\": \"2\",\n                                            d: \"M9 5l7 7-7 7\"\n                                        })\n                                    ], -1 /* CACHED */)\n                                ]))], 8 /* PROPS */, _hoisted_54)\n                        ])\n                    ]))\n                    : _createCommentVNode(\"v-if\", true),\n                _createCommentVNode(\" æ¥¼å±‚é€‰æ‹©å¼¹çª— \"),\n                _createVNode(_Transition, { name: \"fade\" }, {\n                    default: _withCtx(() => [\n                        (state.ui.floorPickerOpen)\n                            ? (_openBlock(), _createElementBlock(\"div\", {\n                                key: 0,\n                                class: \"fixed inset-0 z-[300] flex items-center justify-center bg-black/60 p-6 backdrop-blur-sm\",\n                                onClick: _cache[10] || (_cache[10] = ($event) => (state.ui.floorPickerOpen = false))\n                            }, [\n                                _createElementVNode(\"div\", {\n                                    class: \"glass-card flex max-h-[70vh] w-full max-w-xs flex-col overflow-hidden rounded-3xl\",\n                                    onClick: _cache[9] || (_cache[9] = _withModifiers(() => { }, [\"stop\"]))\n                                }, [\n                                    _createElementVNode(\"div\", _hoisted_55, [\n                                        _cache[33] || (_cache[33] = _createElementVNode(\"span\", { class: \"text-sm font-bold tracking-widest text-slate-400 uppercase\" }, \"é€‰æ‹©æ¥¼å±‚\", -1 /* CACHED */)),\n                                        _createElementVNode(\"button\", {\n                                            class: \"opacity-50 hover:opacity-100\",\n                                            onClick: _cache[8] || (_cache[8] = ($event) => (state.ui.floorPickerOpen = false))\n                                        }, [...(_cache[32] || (_cache[32] = [\n                                                _createElementVNode(\"svg\", {\n                                                    class: \"h-5 w-5\",\n                                                    fill: \"none\",\n                                                    viewBox: \"0 0 24 24\",\n                                                    stroke: \"currentColor\"\n                                                }, [\n                                                    _createElementVNode(\"path\", {\n                                                        \"stroke-linecap\": \"round\",\n                                                        \"stroke-linejoin\": \"round\",\n                                                        \"stroke-width\": \"2\",\n                                                        d: \"M6 18L18 6M6 6l12 12\"\n                                                    })\n                                                ], -1 /* CACHED */)\n                                            ]))])\n                                    ]),\n                                    _createElementVNode(\"div\", _hoisted_56, [\n                                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(state.statusFloors, (floor, index) => {\n                                            return (_openBlock(), _createElementBlock(\"button\", {\n                                                key: index,\n                                                class: _normalizeClass([\"group flex w-full items-center justify-between rounded-xl p-3 text-left transition-all\",\n                                                    state.currentFloorIndex === index\n                                                        ? 'border border-pink-500/30 bg-pink-500/20 text-pink-300'\n                                                        : 'hover:bg-white/5'\n                                                ]),\n                                                onClick: ($event) => {\n                                                    goToFloor(index);\n                                                    state.ui.floorPickerOpen = false;\n                                                }\n                                            }, [\n                                                _createElementVNode(\"span\", _hoisted_58, \"Floor \" + _toDisplayString(index + 1), 1 /* TEXT */),\n                                                (state.currentFloorIndex === index)\n                                                    ? (_openBlock(), _createElementBlock(\"span\", _hoisted_59))\n                                                    : _createCommentVNode(\"v-if\", true)\n                                            ], 10 /* CLASS, PROPS */, _hoisted_57));\n                                        }), 128 /* KEYED_FRAGMENT */))\n                                    ])\n                                ])\n                            ]))\n                            : _createCommentVNode(\"v-if\", true)\n                    ]),\n                    _: 1 /* STABLE */\n                })\n            ], 4 /* STYLE */));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./app.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./app.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./app.vue?vue&type=style&index=0&id=aaa34f68&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { createApp } from 'vue';\nimport app from './app.vue';\n\n$(() => {\n  createApp(app).mount('#app');\n});\n"],"names":["Vue","_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","key","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33","_hoisted_34","_hoisted_35","_hoisted_36","_hoisted_37","_hoisted_38","_hoisted_39","_hoisted_40","_hoisted_41","_hoisted_42","_hoisted_43","_hoisted_44","_hoisted_45","_hoisted_46","_hoisted_47","_hoisted_48","_hoisted_49","_hoisted_50","_hoisted_51","_hoisted_52","_hoisted_53","_hoisted_54","_hoisted_55","_hoisted_56","_hoisted_57","_hoisted_58","_hoisted_59","__name","setup","__props","state","reactive","world","time","location","weather","entropy","characters","system","importantMatters","story","potentialOutcomes","options","ui","settingsOpen","defaultExpanded","currentTheme","themes","midnight","label","value","abyss","cyber","wild","expanded","matters","selectedOutcome","selectedOptionId","selectedOptionLabel","floorPickerOpen","statusFloors","currentFloorIndex","weatherIcon","computed","entropyColor","parseStatus","text","blockMatch","match","content","timeMatch","trim","locationMatch","weatherMatch","entropyMatch","charBlocks","split","slice","map","block","name","descMatch","statusMatch","attitudeMatch","description","status","attitude","progressValMatch","progressLabel","newVal","parseInt","prevMatch","RegExp","progressDelta","undefined","progress","progressStatusMatch","progressStatus","importantMatch","item","filter","length","outcomesMatch","l","optionsMatch","m","id","o","updateData","messages","getChatMessages","e","console","warn","newFloors","Array","isArray","forEach","message","includes","push","isAtLast","Math","min","goToFloor","index","updateInputBox","triggerSlash","log","onMounted","getVariables","getScriptId","savedSettings","type","script_id","Object","assign","loadSettings","eventOn","tavern_events","CHAT_CHANGED","MESSAGE_UPDATED","watch","watchEffect","replaceVariables","obj","JSON","parse","stringify","_ctx","_cache","style","background","onClick","$event","fill","viewBox","stroke","d","default","theme","_","char","width","matter","idx","outcome","opt","disabled","floor","$","createApp","app","mount"],"ignoreList":[],"sourceRoot":""}
>>>>>>> 22abb9d (ä¼˜åŒ–)
